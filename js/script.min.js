let currentVersion="bootstrap";function syncRequiredStatusFromDOM(){document.querySelectorAll(".field-item").forEach(((item,index)=>{const requiredBtn=item.querySelector(".required-btn");if(requiredBtn){const isRequired=requiredBtn.classList.contains("required");fieldRequiredStatus.set(index,isRequired)}}))}function switchVersion(version){currentVersion=version,document.getElementById("bootstrapVersion").classList.toggle("active","bootstrap"===version),document.getElementById("version3").classList.toggle("active","version3"===version),document.body.classList.remove("bootstrap","version3"),document.body.classList.add(version);const validationSection=document.querySelector(".validation-section");validationSection&&(validationSection.style.display="version3"===version?"block":"none");if(document.getElementById("generatedCodeOutput").value.trim()&&(syncRequiredStatusFromDOM(),updateGeneratedCode()),"version3"===version){document.querySelectorAll(".field-item").length>0&&generateValidationCode()}}let lastMerged=null,lastMergedSelection=null;function getSelectedCodeBlocks(){const textarea=document.getElementById("generatedCodeOutput"),value=textarea.value,selectionStart=textarea.selectionStart,selectionEnd=textarea.selectionEnd;if(selectionStart===selectionEnd)return null;if("version3"===currentVersion)return getSelectedFormBoxBlocksVersion3();const rowRegex=/<div class=\"row[\s\S]*?<\/div>/g;let match,blocks=[],blockRanges=[];for(;null!==(match=rowRegex.exec(value));){const blockStart=match.index,blockEnd=match.index+match[0].length;blocks.push(match[0]),blockRanges.push({start:blockStart,end:blockEnd})}let selectedBlocks=[],selectedRanges=[];for(let i=0;i<blockRanges.length;i++){const{start:start,end:end}=blockRanges[i];end>selectionStart&&start<selectionEnd&&(selectedBlocks.push(blocks[i]),selectedRanges.push({start:start,end:end}))}if(selectedBlocks.length<2||selectedBlocks.length>4)return null;const selStart=selectedRanges[0].start,selEnd=selectedRanges[selectedRanges.length-1].end;return{start:selStart,end:selEnd,selectedText:value.substring(selStart,selEnd),blockCount:selectedBlocks.length}}function getSelectedFormBoxBlocksVersion3(){const textarea=document.getElementById("generatedCodeOutput"),value=textarea.value,selectionStart=textarea.selectionStart,selectionEnd=textarea.selectionEnd;if(selectionStart===selectionEnd)return null;const formBoxRegex=/<div class="form_box">[\s\S]*?<\/div>\s*<\/div>\s*<\/div>/g;let match,blocks=[],blockRanges=[];for(;null!==(match=formBoxRegex.exec(value));){const blockStart=match.index,blockEnd=match.index+match[0].length;blocks.push(match[0]),blockRanges.push({start:blockStart,end:blockEnd})}let selectedBlocks=[],selectedRanges=[];for(let i=0;i<blockRanges.length;i++){const{start:start,end:end}=blockRanges[i];end>selectionStart&&start<selectionEnd&&(selectedBlocks.push(blocks[i]),selectedRanges.push({start:start,end:end}))}if(selectedBlocks.length<2||selectedBlocks.length>4)return null;const selStart=selectedRanges[0].start,selEnd=selectedRanges[selectedRanges.length-1].end;return{start:selStart,end:selEnd,selectedText:value.substring(selStart,selEnd),blockCount:selectedBlocks.length}}function showColumnMergePrompt(){if(document.getElementById("columnMergePrompt"))return;const container=document.createElement("div");container.id="columnMergePrompt",container.className="column-merge-modal",container.innerHTML='\n        <div class="modal-title">Merge selected fields into columns?</div>\n        <button id="mergeColumnsYes" class="modal-btn modal-btn-yes">Yes</button>\n        <button id="mergeColumnsNo" class="modal-btn modal-btn-no">No</button>\n    ',document.body.appendChild(container),document.getElementById("mergeColumnsYes").onclick=()=>{mergeSelectedBlocksToColumns(),document.body.removeChild(container)},document.getElementById("mergeColumnsNo").onclick=()=>{document.body.removeChild(container)}}function mergeSelectedBlocksToColumns(){const textarea=document.getElementById("generatedCodeOutput"),value=textarea.value;if("version3"===currentVersion)return mergeSelectedBlocksToColumnsVersion3();const selection=getSelectedCodeBlocks();if(!selection)return;lastMerged=value,lastMergedSelection={start:selection.start,end:selection.end};const colBlocks=[];let remainingText=selection.selectedText;console.log("Selected text for merging:",remainingText);const colBlockRegex=/<div class="col-md-\d+[^"]*"[^>]*>([\s\S]*?)<\/div>/g;let match;for(;null!==(match=colBlockRegex.exec(selection.selectedText));){const fullMatch=match[0];console.log("Extracted column block:",fullMatch),colBlocks.push(fullMatch)}if(![2,3,4].includes(colBlocks.length)||12%colBlocks.length!=0)return;const colWidth=12/colBlocks.length;console.log("Captured column blocks:",colBlocks),console.log("Column width:",colWidth);let mergedRow=`<div class="row g-3 mb-3">\n  ${colBlocks.map(((col,index)=>{if(console.log(`Processing column ${index}:`,col),col.includes("fieldheader")){const result=col.replace(/col-md-\d+/,"col-md-12");return console.log("Header field result:",result),result}{const result=col.replace(/col-md-\d+/,`col-md-${colWidth}`);return console.log("Regular field result:",result),result}})).join("\n  ")}\n</div>`;mergedRow=mergedRow.replace(/(<\/div>\s*)+$/,"</div>");const newValue=value.substring(0,selection.start)+mergedRow+value.substring(selection.end);textarea.value=newValue,textarea.setSelectionRange(selection.start,selection.start+mergedRow.length)}function mergeSelectedBlocksToColumnsVersion3(){const textarea=document.getElementById("generatedCodeOutput"),value=textarea.value,selection=getSelectedFormBoxBlocksVersion3();if(!selection)return;lastMerged=value,lastMergedSelection={start:selection.start,end:selection.end},console.log("Selected text for Version 3 merging:",selection.selectedText);const formBoxRegex=/<div class="form_box">[\s\S]*?<\/div>\s*<\/div>\s*<\/div>/g,formBoxes=[];let match;for(;null!==(match=formBoxRegex.exec(selection.selectedText));){const fullMatch=match[0];console.log("Extracted form_box:",fullMatch),formBoxes.push(fullMatch)}if(![2,3,4].includes(formBoxes.length))return;const groupContents=formBoxes.map((formBox=>{const groupMatch=formBox.match(/<div class="group">([\s\S]*?)<\/div>/);return groupMatch?groupMatch[1]:""})),mergedFormBox=`<div class="form_box">\n   <div class="${`form_box_col${formBoxes.length}`}">\n${groupContents.map((content=>`      <div class="group">\n${content.trim()}\n      </div>`)).join("\n")}\n   </div>\n</div>`;console.log("Merged form_box:",mergedFormBox);const newValue=value.substring(0,selection.start)+mergedFormBox+value.substring(selection.end);textarea.value=newValue,textarea.setSelectionRange(selection.start,selection.start+mergedFormBox.length)}function undoColumnMerge(){if(!lastMerged)return;document.getElementById("generatedCodeOutput").value=lastMerged,lastMerged=null}function generateCode(type){let code="";switch(type){case"Field Header":code='<p class="fieldheader text-center text-uppercase fw-bold py-2 mb-3">Applicant Information</p>\n<input type="hidden" name="Applicant Information" value=":" />';break;case"Number Only":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-4\">\n    <?php $input->fields('Field Name', 'numberOnly', 'Field_Name', ''); ?>\n  </div>\n</div>";break;case"Age Only":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-2\">\n    <?php $input->fields('Age', 'ageOnly', 'Age', ''); ?>\n  </div>\n</div>";break;case"Letter Only":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-6\">\n    <?php $input->fields('Name', 'letterOnly', 'Name', ''); ?>\n  </div>\n</div>";break;case"Normal Text":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-6\">\n    <?php $input->fields('Field Name', 'form-control', 'Field_Name', ''); ?>\n  </div>\n</div>";break;case"Initial Only":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-3\">\n    <?php $input->fields('Initials', 'initialOnly', 'Initials', ''); ?>\n  </div>\n</div>";break;case"Date Picker (Disable Future)":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-4\">\n    <?php $input->datepicker('Start_Date', 'Start_Date', '', 'Date1 DisableFuture', '', 'Start Date'); ?>\n  </div>\n</div>";break;case"Dropdown":code="$state = array('Please select state.', 'Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware', 'District Of Columbia', 'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Puerto Rico', 'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virgin Islands', 'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming');\n            \n           <div class=\"col-md-4\">\n\t\t\t\t\t<?php\n\t\t\t\t\t$input->select('State', 'form-select', $state, 'State', 'required', 'State', '', 'State');\n\t\t\t\t\t?>\n\t\t\t\t</div>";break;case"Phone":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-6\">\n    <?php $input->phoneInput('Phone Number', '', 'Phone', ''); ?>\n  </div>\n</div>";break;case"Email":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-6\">\n    <?php $input->email('Email_Address', '', 'Email_Address', '', '', '', 'example@domain.com'); ?>\n  </div>\n</div>";break;case"Checkbox":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-12 group\" data-limit=\"7\">\n    <?php\n      $input->label('Select Interests', '');\n      $input->chkboxVal('Interests', array('Music', 'Sports', 'Reading'), 'Interests', 'required', '3');\n    ?>\n  </div>\n</div>";break;case"Radio":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-12\">\n    <?php\n      $input->label('Marital Status', '');\n      $input->radio('Marital_Status', array('Single', 'Married', 'Widowed'), 'Marital_Status', 'required', '3');\n    ?>\n  </div>\n</div>";break;case"Date Picker (Disable Past)":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-4\">\n    <?php $input->datepicker('End_Date', 'End_Date', '', 'Date1 DisablePast', '', 'End Date'); ?>\n  </div>\n</div>";break;case"Amount":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-3\">\n    <?php $input->amount('Monthly Salary', 'Salary', ''); ?>\n  </div>\n</div>";break;case"Time":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-4\">\n    <?php $input->time('Start Time', 'Start_Time', ''); ?>\n  </div>\n</div>";break;case"Textarea":code="<div class=\"row g-3 mb-3\">\n                <div class=\"col-md-12\">\n                    <?php\n                    // @param field name, class, id and attribute\n                    $input->textarea('Question_or_Comment', 'form-control', 'Question_or_Comment', 'style=\"height: 100px;\" required', '', ' ', 'Suggestions');\n                    ?>\n                </div>\n            </div>";break;case"Upload File":code="<div class=\"row g-3 mb-3\">\n  <div class=\"col-md-12\">\n    <?php\n      $input->label('Upload File <span style=\"font-style: italic; font-size: 13px; text-transform: lowercase; color:#b1b1b1;\">(accepted file formats: .doc, .docx, .pdf | Max: 10MB)</span>', '');\n      $input->files('', 'file', '', '', 'doc,docx,pdf,zip', '10MB');\n    ?>\n  </div>\n</div>";break;case"Table":code='<div class="row g-3 mb-3">\n        <div class="col-md-12">\n          <div class="employment-history-section">\n            <h4 class="section-title">Employment History</h4>\n            <p class="section-subtitle">Please provide your employment history (starting with most recent)</p>\n            \n            <div class="table-responsive">\n              <table class="table employment-table" id="employmentTable">\n                <thead>\n                  <tr>\n                    <th scope="col">Company Name</th>\n                    <th scope="col">Position</th>\n                    <th scope="col">Start Date</th>\n                    <th scope="col">End Date</th>\n                    <th scope="col">Supervisor</th>\n                    <th scope="col">Reason for Leaving</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  \x3c!-- Row 1 --\x3e\n                  <tr>\n                    <td data-label="Company Name">\n                      <input type="text" class="form-control table-input" name="Company_Name_1" placeholder="Company Name">\n                    </td>\n                    <td data-label="Position">\n                      <input type="text" class="form-control table-input" name="Position_1" placeholder="Position/Title">\n                    </td>\n                    <td data-label="Start Date">\n                      <input type="date" class="form-control table-input" name="Start_Date_1">\n                    </td>\n                    <td data-label="End Date">\n                      <input type="date" class="form-control table-input" name="End_Date_1">\n                    </td>\n                    <td data-label="Supervisor">\n                      <input type="text" class="form-control table-input" name="Supervisor_1" placeholder="Supervisor Name">\n                    </td>\n                    <td data-label="Reason for Leaving">\n                      <input type="text" class="form-control table-input" name="Reason_Leaving_1" placeholder="Reason for leaving">\n                    </td>\n                  </tr>\n                  \x3c!-- Row 2 --\x3e\n                  <tr>\n                    <td data-label="Company Name">\n                      <input type="text" class="form-control table-input" name="Company_Name_2" placeholder="Company Name">\n                    </td>\n                    <td data-label="Position">\n                      <input type="text" class="form-control table-input" name="Position_2" placeholder="Position/Title">\n                    </td>\n                    <td data-label="Start Date">\n                      <input type="date" class="form-control table-input" name="Start_Date_2">\n                    </td>\n                    <td data-label="End Date">\n                      <input type="date" class="form-control table-input" name="End_Date_2">\n                    </td>\n                    <td data-label="Supervisor">\n                      <input type="text" class="form-control table-input" name="Supervisor_2" placeholder="Supervisor Name">\n                    </td>\n                    <td data-label="Reason for Leaving">\n                      <input type="text" class="form-control table-input" name="Reason_Leaving_2" placeholder="Reason for leaving">\n                    </td>\n                  </tr>\n                  \x3c!-- Row 3 --\x3e\n                  <tr>\n                    <td data-label="Company Name">\n                      <input type="text" class="form-control table-input" name="Company_Name_3" placeholder="Company Name">\n                    </td>\n                    <td data-label="Position">\n                      <input type="text" class="form-control table-input" name="Position_3" placeholder="Position/Title">\n                    </td>\n                    <td data-label="Start Date">\n                      <input type="date" class="form-control table-input" name="Start_Date_3">\n                    </td>\n                    <td data-label="End Date">\n                      <input type="date" class="form-control table-input" name="End_Date_3">\n                    </td>\n                    <td data-label="Supervisor">\n                      <input type="text" class="form-control table-input" name="Supervisor_3" placeholder="Supervisor Name">\n                    </td>\n                    <td data-label="Reason for Leaving">\n                      <input type="text" class="form-control table-input" name="Reason_Leaving_3" placeholder="Reason for leaving">\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            \n            <div class="table-note">\n              <small class="text-muted">\n                <i class="fas fa-info-circle"></i>\n                Note: Please fill in at least your most recent employment. Additional rows are optional.\n              </small>\n            </div>\n          </div>\n        </div>\n      </div>';break;case"Signature":code='<div class="row g-3 mb-3">\n        <div class="col-md-12">\n          <div class="signature-section">\n            <h5 class="signature-title">Signature of Parent/Guardian Required</h5>\n            <div class="row">\n              <div class="col-md-8">\n                <div class="sigPad signature-pad-container" id="signaturePad">\n                  <div class="sig sigWrapper current">\n                    <div class="typed"></div>\n                    <canvas class="pad" width="100%" height="200"></canvas>\n                    <input type="hidden" name="Signature_of_Parent_or_Legal_Guardian" class="output">\n                  </div>\n                  <div class="signature-controls d-flex justify-content-between align-items-center mt-2">\n                    <p class="clearButton mb-0">\n                      <a href="#clear" class="btn btn-outline-danger btn-sm">\n                        <i class="fas fa-eraser"></i> Clear Signature\n                      </a>\n                    </p>\n                    <small class="text-muted">\n                      <i class="fas fa-pen"></i> Draw your signature above\n                    </small>\n                  </div>\n                </div>\n                <div class="invalid-feedback signature-invalid-feedback" style="display: none;">\n                  Please provide your signature before submitting the form.\n                </div>\n              </div>\n              <div class="col-md-4">\n                <?php $input->dateToday(\'Date_Signed\', \'Date_Signed\', \'\', \'Date\'); ?>\n                <div class="signature-note mt-3">\n                  <div class="alert alert-info">\n                    <i class="fas fa-info-circle"></i>\n                    <strong>Instructions:</strong><br>\n                    ‚Ä¢ Use your mouse or finger to sign<br>\n                    ‚Ä¢ Sign clearly within the box<br>\n                    ‚Ä¢ Click "Clear" to start over\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>';break;case"Privacy Policy":code='\n      }else if($key == "Privacy_Policy"){\n          $body .= \'<tr><td colspan="3" line-height:30px">\n\n          <input type="checkbox" checked disabled /> I consent to the collection and processing of my personal information and, where applicable, health-related information, including any data I submit on behalf of others. This is for the purpose of evaluating or fulfilling my request, in accordance with the Privacy Policy.\n\n          </td></tr>\';\n      \n      <div class="disclaimer">\n        <p><input type="checkbox" name="Privacy_Policy" style="-webkit-appearance:checkbox" /> &nbsp;<b>I consent to the collection and processing of my personal information and, where applicable, health-related information, including any data I submit on behalf of others. This is for the purpose of evaluating or fulfilling my request, in accordance with the <a href="<?php echo get_home_url(); ?>/privacy-policy" target="_blank">Privacy Policy</a>.</b> </p>\n      </div>'}document.getElementById("codeOutput").textContent=code,navigator.clipboard.writeText(code).then((()=>{const btn=document.getElementById("copyBtn");btn.textContent="Copied!",setTimeout((()=>btn.textContent="Copy"),1500)}))}function generateCodeForVersion(type){let code="";if("bootstrap"===currentVersion)return generateCode(type);switch(type){case"Field Header":code='<p class="fieldheader">OTHER FUNCTIONS</p>\n<input type="hidden" name="OTHER FUNCTIONS" value=":">';break;case"Number Only":case"Normal Text":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Field Name', '');\n            $input->fields('Field_Name', 'form_field', 'Field_Name', '');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Age Only":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Age', '');\n            $input->fields('Age', 'form_field', 'Age', '');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Letter Only":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Name', '');\n            $input->fields('Name', 'form_field', 'Name', '');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Initial Only":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Initials', '');\n            $input->fields('Initials', 'form_field', 'Initials', '');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Date Picker (Disable Future)":case"Date Picker (Disable Past)":code="<div class=\"form_box\">\n   <div class=\"form_box_col2\">\n      <div class=\"group\">\n         <?php\n            $input->label('Date', '*');\n            $input->fields('Date', 'form_field Date', 'Date', 'placeholder=\"Enter date here\"');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Dropdown":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Marital Status', '');\n            $input->select('Marital_Status', 'form_field', $choices, 'Marital_Status');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Phone":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Phone Number', '*');\n            $input->phoneInput('Phone_Number', 'form_field','Phone_Number','placeholder=\"Enter phone number here\" onkeypress=\"return isNumberKey(evt)\"');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Email":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Email Address', '');\n            $input->fields('Email_Address', 'form_field', 'Email_Address', '');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Checkbox":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Available Time', '');\n            $input->chkboxVal('Available_Time', array('8:00 am','9:00 am','10:00 am','Other'), '', '', '4');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Radio":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Would you be available to work overtime, if necessary?', '');\n            $input->radio('Available_to_work_overtime', array('Yes', 'No', 'Maybe'), '', '', '3');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Amount":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Monthly Salary', '');\n            $input->amount('Salary', 'Salary', '');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Time":code="<div class=\"form_box\">\n   <div class=\"form_box_col1\">\n      <div class=\"group\">\n         <?php\n            $input->label('Start Time', '');\n            $input->fields('Start_Time', 'form_field', 'Start_Time', '');\n         ?>\n      </div>\n   </div>\n</div>";break;case"Textarea":code="<div class=\"form_box\">\n                           <div class=\"form_box_col1\">\n                              <div class=\"group\">\n                                 <?php\n                                    // @param label-name, if required\n                                    $input->label('Question / Comment');\n                                    // @param field name, class, id and attribute\n                                    $input->textarea('Question_or_Comment', 'text form_field','Question_or_Comment','placeholder=\"Enter your question or comment here\"');\n                                    ?>\n                              </div>\n                           </div>\n                        </div>";break;case"Upload File":code='<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label(\'Attach Resume\', \'*\');\n         ?>\n         <input type="file" name="attachment[]" id="file" class="form_field" multiple>\n      </div>\n   </div>\n</div>';break;case"Table":code='<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label(\'Employment History\', \'\');\n         ?>\n         \x3c!-- Table content would go here --\x3e\n      </div>\n   </div>\n</div>';break;case"Signature":code='<div class="form_box my_signature">\n   <div class="form_box_col2">\n      <div class="group">\n         <?php\n            $input->label(\'Signature\', \'\');\n         ?>\n         <div class="sigPad" style="margin-top:5px;">\n            <div class="sig sigWrapper">\n               <div class="typed"></div>\n               <canvas class="pad" width="196" height="50"></canvas>\n               <input type="hidden" name="Signature" class="output">\n            </div>\n            <p class="clearButton"><a style="color:#2f2f2f;" href="#clear">Clear</a></p>\n         </div>\n      </div>\n      <div class="group">\n         <?php\n            $input->label(\'Date\', \'\');\n         ?>\n         <input type="text" class="form_field"  name="Date_" value="<?php echo date(\'F d, Y\'); ?>" style="background: #f1f1f1;" readonly />\n      </div>\n   </div>\n</div>';break;case"Privacy Policy":code='<div class="disclaimer">\n   <p><input type="checkbox" name="Privacy_Policy" style="-webkit-appearance:checkbox" /> &nbsp;<b>I consent to the collection and processing of my personal information and, where applicable, health-related information, including any data I submit on behalf of others. This is for the purpose of evaluating or fulfilling my request, in accordance with the <a href="<?php echo get_home_url(); ?>/privacy-policy" target="_blank">Privacy Policy</a>.</b> </p>\n</div>'}document.getElementById("codeOutput").textContent=code,navigator.clipboard.writeText(code).then((()=>{const btn=document.getElementById("copyBtn");btn.textContent="Copied!",setTimeout((()=>btn.textContent="Copy"),1500)}))}function copyCode(){const output=document.getElementById("codeOutput");navigator.clipboard.writeText(output.textContent).then((()=>{const btn=document.getElementById("copyBtn");btn.textContent="Copied!",setTimeout((()=>btn.textContent="Copy"),1500)}))}document.addEventListener("DOMContentLoaded",(function(){const textarea=document.getElementById("generatedCodeOutput");textarea&&(textarea.addEventListener("mouseup",(function(){setTimeout((()=>{getSelectedCodeBlocks()&&showColumnMergePrompt()}),10)})),syncRequiredStatusFromDOM())})),document.addEventListener("DOMContentLoaded",(function(){const undoBtn=document.getElementById("undoColumnMergeBtn");undoBtn&&(undoBtn.onclick=undoColumnMerge);const searchInput=document.getElementById("fieldTypeSearch"),fieldTypeButtons=document.getElementById("fieldTypeButtons");searchInput&&fieldTypeButtons&&(searchInput.addEventListener("input",(function(){const searchTerm=this.value.toLowerCase().trim();fieldTypeButtons.querySelectorAll(".btn-tool").forEach((button=>{const buttonText=button.textContent.toLowerCase(),fieldType=button.getAttribute("data-field-type");""===searchTerm||buttonText.includes(searchTerm)||fieldType.includes(searchTerm)?(button.style.display="inline-flex",button.style.opacity="1"):(button.style.display="none",button.style.opacity="0")}))})),document.addEventListener("click",(function(e){if(!searchInput.contains(e.target)&&!fieldTypeButtons.contains(e.target)){searchInput.value="";fieldTypeButtons.querySelectorAll(".btn-tool").forEach((button=>{button.style.display="inline-flex",button.style.opacity="1"}))}})))}));let currentFieldIndex=-1,fieldTypeOverrides=new Map,fieldOptions=new Map,fieldRequiredStatus=new Map,otherFieldCounter=0;function transformText(){const input=document.getElementById("transformInput").value,outputContainer=document.getElementById("transformOutputContainer"),underscoreCount=parseInt(document.getElementById("underscoreCount").value)||0;if(""===input.trim())return outputContainer.innerHTML='<div style="color: #6c757d; font-style: italic; text-align: center; padding: 20px;">Transformed text will appear here...</div>',void(document.getElementById("generatedCodeOutput").value="");const lines=input.split("\n"),usedFieldNames=new Set;let outputHTML="";lines.forEach(((line,index)=>{if(""===line.trim())return;let fieldName=line.trim().replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");underscoreCount>0&&(fieldName="_".repeat(underscoreCount)+fieldName);let finalFieldName=fieldName,duplicateUnderscoreCount=0;for(;usedFieldNames.has(finalFieldName);)duplicateUnderscoreCount++,finalFieldName=fieldName+"_".repeat(duplicateUnderscoreCount);usedFieldNames.add(finalFieldName);const currentFieldType=fieldTypeOverrides.get(index)||"normal",currentOptions=fieldOptions.get(index)||"";outputHTML+=`\n            <div class="field-item" data-field-name="${finalFieldName}" data-index="${index}">\n                <span class="field-text">${finalFieldName}</span>\n                <div class="field-controls">\n                    <div class="field-type-buttons">\n                        <button class="field-type-btn ${"normal"===currentFieldType?"active":""}" onclick="setFieldType(${index}, 'normal')" title="Normal Text">\n                            üìù\n                        </button>\n                        <button class="field-type-btn ${"header"===currentFieldType?"active":""}" onclick="setFieldType(${index}, 'header')" title="Field Header">\n                            üìÑ\n                        </button>\n                        <button class="field-type-btn ${"radio"===currentFieldType?"active":""}" onclick="setFieldType(${index}, 'radio')" title="Radio Buttons">\n                            üîò\n                        </button>\n                        <button class="field-type-btn ${"select"===currentFieldType?"active":""}" onclick="setFieldType(${index}, 'select')" title="Dropdown">\n                            üìã\n                        </button>\n                        <button class="field-type-btn ${"checkbox"===currentFieldType?"active":""}" onclick="setFieldType(${index}, 'checkbox')" title="Checkbox">\n                            ‚òëÔ∏è\n                        </button>\n                        <button class="field-type-btn ${"privacy"===currentFieldType?"active":""}" onclick="setFieldType(${index}, 'privacy')" title="Docu Checkbox">\n                            üîí\n                        </button>\n                        <button class="field-type-btn ${"textarea"===currentFieldType?"active":""}" onclick="setFieldType(${index}, 'textarea')" title="Textarea">\n                            <span class="textarea-icon">üìù</span>\n                        </button>\n                    </div>\n                    ${"radio"===currentFieldType||"select"===currentFieldType||"checkbox"===currentFieldType?`\n                        <div class="options-input">\n                            <input type="text" class="options-textbox" placeholder="option 1, option 2, option 3" \n                                   value="${currentOptions}" \n                                   oninput="setFieldOptions(${index}, this.value)" \n                                   onchange="setFieldOptions(${index}, this.value)" \n                                   onblur="setFieldOptions(${index}, this.value)">\n                        </div>\n                    `:""}\n                    ${"header"!==currentFieldType&&"privacy"!==currentFieldType?`\n                    <button class="required-btn ${fieldRequiredStatus.get(index)?"required":"not-required"}" onclick="toggleRequired(${index})" data-index="${index}">\n                        ${fieldRequiredStatus.get(index)?"Required ‚úì":"Required"}\n                    </button>\n                    `:""}\n                </div>\n            </div>\n        `})),outputContainer.innerHTML=outputHTML;document.querySelectorAll(".field-item").forEach(((item,index)=>{fieldRequiredStatus.has(index)||fieldRequiredStatus.set(index,!1)})),generateFormCode(input),"version3"===currentVersion&&generateValidationCode()}function setFieldType(index,type){fieldTypeOverrides.set(index,type),"normal"===type&&fieldOptions.delete(index),transformText(),updateGeneratedCode()}function setFieldOptions(index,options){fieldOptions.set(index,options),updateGeneratedCode(),generateValidationCode()}function generatePlaceholder(label){if(!label)return"";let placeholder=label.toLowerCase();return placeholder=`Enter ${placeholder} here`,placeholder}function generateOtherFieldIfNeeded(optionsText,fieldName,requiredText,underscoreCount=0,usedFieldNames=null){if(!optionsText)return"";if(optionsText.split(",").map((opt=>opt.trim().toLowerCase())).includes("other")){otherFieldCounter++;const underscorePrefix=underscoreCount>0?"_".repeat(underscoreCount):"";let otherFieldName=underscorePrefix+"other";if(usedFieldNames){let finalOtherFieldName=otherFieldName,duplicateUnderscoreCount=0;for(;usedFieldNames.has(finalOtherFieldName);)duplicateUnderscoreCount++,finalOtherFieldName=otherFieldName+"_".repeat(duplicateUnderscoreCount);usedFieldNames.add(finalOtherFieldName),otherFieldName=finalOtherFieldName}return`\n        <div class="row g-3 mb-3" id="${underscorePrefix}ifOther${otherFieldCounter}">\n          <div class="col-md-12">\n            <?php $input->fields('${otherFieldName}', 'form-control', '${otherFieldName}', ${requiredText}); ?>\n          </div>\n        </div>`}return""}function generateOtherFieldIfNeededVersion3(optionsText,fieldName,requiredText,underscoreCount=0,usedFieldNames=null){if(!optionsText)return"";if(optionsText.split(",").map((opt=>opt.trim().toLowerCase())).includes("other")){otherFieldCounter++;let otherFieldName=(underscoreCount>0?"_".repeat(underscoreCount):"")+"other";if(usedFieldNames){let finalOtherFieldName=otherFieldName,duplicateUnderscoreCount=0;for(;usedFieldNames.has(finalOtherFieldName);)duplicateUnderscoreCount++,finalOtherFieldName=otherFieldName+"_".repeat(duplicateUnderscoreCount);usedFieldNames.add(finalOtherFieldName),otherFieldName=finalOtherFieldName}const placeholder=generatePlaceholder("other");return`\n        <div class="form_box" id="ifOther${otherFieldCounter}">\n           <div class="form_box_col1">\n              <div class="group">\n                 <?php\n                    $input->label('${otherFieldName}', '');\n                    $input->fields('${otherFieldName}', 'form_field', '${otherFieldName}', 'placeholder="${placeholder}"');\n                 ?>\n              </div>\n           </div>\n        </div>`}return""}function generateFormCode(inputText){return"bootstrap"===currentVersion?generateFormCodeBootstrap(inputText):generateFormCodeVersion3(inputText)}function generateFormCodeBootstrap(inputText){const lines=inputText.split("\n").filter((line=>""!==line.trim())),codeOutput=document.getElementById("generatedCodeOutput");let generatedCode="";const usedFieldNames=new Set,underscoreCount=parseInt(document.getElementById("underscoreCount").value)||0;otherFieldCounter=0;let privacyPolicyCounter=0;lines.forEach(((line,index)=>{const originalText=line.trim();let fieldName=originalText.replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");underscoreCount>0&&(fieldName="_".repeat(underscoreCount)+fieldName);let finalFieldName=fieldName,duplicateUnderscoreCount=0;for(;usedFieldNames.has(finalFieldName);)duplicateUnderscoreCount++,finalFieldName=fieldName+"_".repeat(duplicateUnderscoreCount);usedFieldNames.add(finalFieldName);let fieldCode="";const lowerText=originalText.toLowerCase(),customFieldType=fieldTypeOverrides.get(index),fieldOptionsText=fieldOptions.get(index)||"",labelText=originalText;if(customFieldType)if("header"===customFieldType)fieldCode=`<p class="fieldheader text-center text-uppercase fw-bold py-2 mb-3">${originalText}</p>\n<input type="hidden" name="${finalFieldName}" value=":" />`;else if("radio"===customFieldType){fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php\n      $input->label('${labelText}', '');\n      $input->radio('${finalFieldName}', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '${finalFieldName}', '', '${fieldOptionsText?fieldOptionsText.split(",").length:3}');\n    ?>\n  </div>\n</div>`,fieldCode+=generateOtherFieldIfNeeded(fieldOptionsText,finalFieldName,"''",underscoreCount,usedFieldNames)}else if("checkbox"===customFieldType){fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12 group" data-limit="7">\n    <?php\n      $input->label('${labelText}', '');\n      $input->chkboxVal('${finalFieldName}', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '${finalFieldName}', '', '${fieldOptionsText?fieldOptionsText.split(",").length:3}');\n    ?>\n  </div>\n</div>`,fieldCode+=generateOtherFieldIfNeeded(fieldOptionsText,finalFieldName,"''",underscoreCount,usedFieldNames)}else if("select"===customFieldType){fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-4">\n    <?php $input->select('${finalFieldName}', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '${finalFieldName}', ''); ?>\n  </div>i clicked\n</div>`,fieldCode+=generateOtherFieldIfNeeded(fieldOptionsText,finalFieldName,"''",underscoreCount,usedFieldNames)}else if("textarea"===customFieldType){const fieldItem=document.querySelector(`.field-item[data-index="${index}"]`);fieldCode=`<div class="row g-3 mb-3">\n                <div class="col-md-12">\n                    <?php\n                    // @param field name, class, id and attribute\n                    $input->textarea('${finalFieldName}', 'form-control', '${finalFieldName}', 'style="height: 100px;"${fieldItem&&fieldItem.querySelector(".required-btn")&&fieldItem.querySelector(".required-btn").classList.contains("required")?" required":""}', '', ' ', '${originalText}');\n                    ?>\n                </div>\n            </div>`}else if("privacy"===customFieldType){const fieldItem=document.querySelector(`.field-item[data-index="${index}"]`),isRequired=fieldItem&&fieldItem.querySelector(".required-btn")&&fieldItem.querySelector(".required-btn").classList.contains("required");privacyPolicyCounter++;fieldCode=`<div class="disclaimer">\n  <p><input type="checkbox" name="${`Docu${privacyPolicyCounter.toString().padStart(2,"0")}`}" style="-webkit-appearance:checkbox" ${isRequired?"required":""} /> &nbsp;<b>${originalText}</b> </p>\n</div>`}else fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php $input->fields('${finalFieldName}', 'form-control', '${finalFieldName}', ''); ?>\n  </div>\n</div>`;else if(lowerText.includes("date")||lowerText.includes("birth")||lowerText.includes("dob"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-4">\n    <?php $input->datepicker('${finalFieldName}', '${finalFieldName}', '', 'Date1 DisableFuture', '', '${labelText}'); ?>\n  </div>\n</div>`;else if(lowerText.includes("email")||lowerText.includes("e-mail"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php $input->email('${finalFieldName}', '', '${finalFieldName}', '', '', '', '${labelText}'); ?>\n  </div>\n</div>`;else if(lowerText.includes("phone")||lowerText.includes("mobile")||lowerText.includes("contact"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php $input->phoneInput('${finalFieldName}', '', '${finalFieldName}', ''); ?>\n  </div>\n</div>`;else if(lowerText.includes("initial")||lowerText.includes("initials"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-3">\n    <?php $input->fields('${finalFieldName}', 'initialOnly', '${finalFieldName}', ''); ?>\n  </div>\n</div>`;else if(lowerText.includes("age"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-2">\n    <?php $input->fields('${finalFieldName}', 'ageOnly', '${finalFieldName}', ''); ?>\n  </div>\n</div>`;else if(lowerText.includes("amount")||lowerText.includes("salary")||lowerText.includes("price")||lowerText.includes("cost"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-3">\n    <?php $input->amount('${finalFieldName}', '${finalFieldName}', ''); ?>\n  </div>\n</div>`;else if(lowerText.includes("upload")||lowerText.includes("attach")||lowerText.includes("file")||lowerText.includes("document"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php\n      $input->label('${labelText} <span style="font-style: italic; font-size: 13px; text-transform: lowercase; color:#b1b1b1;">(accepted file formats: .doc, .docx, .pdf | Max: 10MB)</span>', '');\n      $input->files('', 'file', '${finalFieldName}', '', 'doc,docx,pdf,zip', '10MB');\n    ?>\n  </div>\n</div>`;else if(lowerText.includes("signature")||lowerText.includes("sign"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <div class="signature-section">\n      <h5 class="signature-title">${labelText}</h5>\n      <div class="row">\n        <div class="col-md-8">\n          <div class="sigPad signature-pad-container" id="signaturePad">\n            <div class="sig sigWrapper current">\n              <div class="typed"></div>\n              <canvas class="pad" width="100%" height="200"></canvas>\n              <input type="hidden" name="${finalFieldName}" class="output">\n            </div>\n            <div class="signature-controls d-flex justify-content-between align-items-center mt-2">\n              <p class="clearButton mb-0">\n                <a href="#clear" class="btn btn-outline-danger btn-sm">\n                  <i class="fas fa-eraser"></i> Clear Signature\n                </a>\n              </p>\n              <small class="text-muted">\n                <i class="fas fa-pen"></i> Draw your signature above\n              </small>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <?php $input->dateToday('Date_Signed', 'Date_Signed', '', 'Date'); ?>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>`;else if(lowerText.includes("number")||lowerText.includes("quantity")||lowerText.includes("count"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-4">\n    <?php $input->fields('${finalFieldName}', 'numberOnly', '${finalFieldName}', ''); ?>\n  </div>\n</div>`;else if(lowerText.includes("yes")||lowerText.includes("no")||lowerText.includes("gender")||lowerText.includes("marital")||lowerText.includes("status")){let options=[];options=lowerText.includes("yes")||lowerText.includes("no")?["Yes","No"]:lowerText.includes("gender")?["Male","Female"]:lowerText.includes("marital")?["Single","Married","Widowed"]:["Option 1","Option 2","Option 3"],fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php\n      $input->label('${labelText}', '');\n      $input->radio('${finalFieldName}', array('${options.join("', '")}'), '${finalFieldName}', '', '${options.length}');\n    ?>\n  </div>\n</div>`}else if(lowerText.includes("select")||lowerText.includes("choose")||lowerText.includes("category")||lowerText.includes("type"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-4">\n    <?php $input->select('${finalFieldName}', array('Option 1', 'Option 2', 'Option 3'), '${finalFieldName}', ''); ?>\n  </div>\n</div>`;else if(lowerText.includes("check")||lowerText.includes("multiple")||lowerText.includes("interests")||lowerText.includes("hobbies"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12 group" data-limit="7">\n    <?php\n      $input->label('${labelText}', '');\n      $input->chkboxVal('${finalFieldName}', array('Option 1', 'Option 2', 'Option 3'), '${finalFieldName}', '', '3');\n    ?>\n  </div>\n</div>`;else if(lowerText.includes("comment")||lowerText.includes("description")||lowerText.includes("explanation")||lowerText.includes("note")||lowerText.includes("detail")){const fieldItem=document.querySelector(`.field-item[data-index="${index}"]`);fieldCode=`<div class="row g-3 mb-3">\n                <div class="col-md-12">\n                    <?php\n                    // @param field name, class, id and attribute\n                    $input->textarea('${finalFieldName}', 'form-control', '${finalFieldName}', 'style="height: 100px;"${fieldItem&&fieldItem.querySelector(".required-btn")&&fieldItem.querySelector(".required-btn").classList.contains("required")?" required":""}', '', ' ', '${originalText}');\n                    ?>\n                </div>\n            </div>`}else fieldCode=lowerText.includes("header")||lowerText.includes("title")||lowerText.includes("section")?`<p class="fieldheader text-center text-uppercase fw-bold py-2 mb-3">${originalText}</p>\n<input type="hidden" name="${finalFieldName}" value=":" />`:lowerText.includes("name")||lowerText.includes("first")||lowerText.includes("last")||lowerText.includes("full")?`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php $input->fields('${finalFieldName}', 'letterOnly', '${finalFieldName}', ''); ?>\n  </div>\n</div>`:lowerText.includes("privacy policy")||lowerText.includes("terms and conditions")||lowerText.includes("data consent")||lowerText.includes("personal information consent")?`<div class="disclaimer">\n  <p><input type="checkbox" name="${finalFieldName}" style="-webkit-appearance:checkbox" ${isRequired?"required":""} /> &nbsp;<b>${originalText}</b> </p>\n</div>`:`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php $input->fields('${finalFieldName}', 'form-control', '${finalFieldName}', ''); ?>\n  </div>\n</div>`;generatedCode+=fieldCode+"\n\n"})),codeOutput.value=generatedCode.trim()}function generateFormCodeVersion3(inputText){const lines=inputText.split("\n").filter((line=>""!==line.trim())),codeOutput=document.getElementById("generatedCodeOutput");let generatedCode="";const usedFieldNames=new Set,underscoreCount=parseInt(document.getElementById("underscoreCount").value)||0;otherFieldCounter=0;let privacyPolicyCounter=0;lines.forEach(((line,index)=>{const originalText=line.trim();let fieldName=originalText.replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");underscoreCount>0&&(fieldName="_".repeat(underscoreCount)+fieldName);let finalFieldName=fieldName,duplicateUnderscoreCount=0;for(;usedFieldNames.has(finalFieldName);)duplicateUnderscoreCount++,finalFieldName=fieldName+"_".repeat(duplicateUnderscoreCount);usedFieldNames.add(finalFieldName);const fieldItem=document.querySelector(`.field-item[data-index="${index}"]`),isRequired=fieldItem&&fieldItem.querySelector(".required-btn")&&fieldItem.querySelector(".required-btn").classList.contains("required"),requiredText=isRequired?"'required'":"''";let fieldCode="";const lowerText=originalText.toLowerCase(),customFieldType=fieldTypeOverrides.get(index),fieldOptionsText=fieldOptions.get(index)||"",labelText=originalText,labelSuffix=isRequired?"*":"";if(customFieldType)if("header"===customFieldType)fieldCode=`<p class="fieldheader">${originalText}</p>\n<input type="hidden" name="${finalFieldName}" value=":" />`;else if("radio"===customFieldType){fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->radio('${finalFieldName}', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '', '', '${fieldOptionsText?fieldOptionsText.split(",").length:3}');\n         ?>\n      </div>\n   </div>\n</div>`,fieldCode+=generateOtherFieldIfNeededVersion3(fieldOptionsText,finalFieldName,requiredText,underscoreCount,usedFieldNames)}else if("checkbox"===customFieldType){fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->chkboxVal('${finalFieldName}', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '', '', '${fieldOptionsText?fieldOptionsText.split(",").length:3}');\n         ?>\n      </div>\n   </div>\n</div>`,fieldCode+=generateOtherFieldIfNeededVersion3(fieldOptionsText,finalFieldName,requiredText,underscoreCount,usedFieldNames)}else if("select"===customFieldType){fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->select('${finalFieldName}', 'form_field', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '${finalFieldName}');\n         ?>\n      </div>\n   </div>\n</div>`,fieldCode+=generateOtherFieldIfNeededVersion3(fieldOptionsText,finalFieldName,requiredText,underscoreCount,usedFieldNames)}else if("textarea"===customFieldType)fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            // @param label-name, if required\n            $input->label('${labelText}', '${labelSuffix}');\n            // @param field name, class, id and attribute\n            $input->textarea('${finalFieldName}', 'text form_field','${finalFieldName}','placeholder="Enter your ${originalText.toLowerCase()} here"');\n         ?>\n      </div>\n   </div>\n</div>`;else if("privacy"===customFieldType){privacyPolicyCounter++;fieldCode=`<div class="disclaimer">\n   <p><input type="checkbox" name="${`Docu${privacyPolicyCounter.toString().padStart(2,"0")}`}" style="-webkit-appearance:checkbox" /> &nbsp;<b>${originalText}</b> </p>\n</div>`}else{fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->fields('${finalFieldName}', 'form_field', '${finalFieldName}', 'placeholder="${generatePlaceholder(originalText)}"');\n         ?>\n      </div>\n   </div>\n</div>`}else if(lowerText.includes("date")||lowerText.includes("birth")||lowerText.includes("dob"))fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->fields('${finalFieldName}', 'form_field Date', '${finalFieldName}', 'placeholder="Enter date here"');\n         ?>\n      </div>\n   </div>\n</div>`;else if(lowerText.includes("phone")||lowerText.includes("mobile")||lowerText.includes("contact"))fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->phoneInput('${finalFieldName}', 'form_field','${finalFieldName}','placeholder="Enter phone number here" onkeypress="return isNumberKey(evt)"');\n         ?>\n      </div>\n   </div>\n</div>`;else if(lowerText.includes("email")||lowerText.includes("e-mail"))fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->fields('${finalFieldName}', 'form_field', '${finalFieldName}', '');\n         ?>\n      </div>\n   </div>\n</div>`;else if(lowerText.includes("address")||lowerText.includes("street")||lowerText.includes("city")||lowerText.includes("state")||lowerText.includes("zip"))fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->fields('${finalFieldName}', 'form_field','${finalFieldName}','placeholder="Enter ${lowerText} here"');\n         ?>\n      </div>\n   </div>\n</div>`;else if(lowerText.includes("salary")||lowerText.includes("amount")||lowerText.includes("price")||lowerText.includes("cost"))fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->amount('${finalFieldName}', '${finalFieldName}', '');\n         ?>\n      </div>\n   </div>\n</div>`;else if(lowerText.includes("comment")||lowerText.includes("note")||lowerText.includes("description")||lowerText.includes("explanation"))fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            // @param label-name, if required\n            $input->label('${labelText}', '${labelSuffix}');\n            // @param field name, class, id and attribute\n            $input->textarea('${finalFieldName}', 'text form_field','${finalFieldName}','placeholder="Enter your ${originalText.toLowerCase()} here"');\n         ?>\n      </div>\n   </div>\n</div>`;else if(lowerText.includes("file")||lowerText.includes("upload")||lowerText.includes("attachment")||lowerText.includes("resume"))fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n         ?>\n         <input type="file" name="attachment[]" id="file" class="form_field" multiple>\n      </div>\n   </div>\n</div>`;else if(lowerText.includes("signature")||lowerText.includes("sign"))fieldCode=`<div class="form_box my_signature">\n   <div class="form_box_col2">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n         ?>\n         <div class="sigPad" style="margin-top:5px;">\n            <div class="sig sigWrapper">\n               <div class="typed"></div>\n               <canvas class="pad" width="196" height="50"></canvas>\n            </div>\n         </div>\n      </div>\n   </div>\n</div>`;else{fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->fields('${finalFieldName}', 'form_field', '${finalFieldName}', 'placeholder="${generatePlaceholder(originalText)}"');\n         ?>\n      </div>\n   </div>\n</div>`}generatedCode+=fieldCode+"\n\n"})),codeOutput.value=generatedCode.trim()}function generateFormCodeWithRequiredVersion3(inputText,fieldData){const lines=inputText.split("\n").filter((line=>""!==line.trim())),codeOutput=document.getElementById("generatedCodeOutput");let generatedCode="";const usedFieldNames=new Set,underscoreCount=parseInt(document.getElementById("underscoreCount").value)||0;otherFieldCounter=0;let privacyPolicyCounter=0;lines.forEach(((line,index)=>{const fieldInfo=fieldData[index];if(!fieldInfo)return;let fieldName=fieldInfo.name;underscoreCount>0&&!fieldName.startsWith("_".repeat(underscoreCount))&&(fieldName="_".repeat(underscoreCount)+fieldName);const isRequired=fieldInfo.required,requiredText=isRequired?"'required'":"''";let fieldCode="";const originalText=fieldInfo.originalText,lowerText=originalText.toLowerCase(),customFieldType=fieldTypeOverrides.get(index),fieldOptionsText=fieldOptions.get(index)||"",labelText=originalText,labelSuffix=isRequired?"*":"";if(customFieldType)if("header"===customFieldType)fieldCode=`<p class="fieldheader">${originalText}</p>\n<input type="hidden" name="${fieldName}" value=":" />`;else if("radio"===customFieldType){fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->radio('${fieldName}', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '', '', '${fieldOptionsText?fieldOptionsText.split(",").length:3}');\n         ?>\n      </div>\n   </div>\n</div>`,fieldCode+=generateOtherFieldIfNeededVersion3(fieldOptionsText,fieldName,requiredText,underscoreCount,usedFieldNames)}else if("checkbox"===customFieldType){fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->chkboxVal('${fieldName}', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '', '', '${fieldOptionsText?fieldOptionsText.split(",").length:3}');\n         ?>\n      </div>\n   </div>\n</div>`,fieldCode+=generateOtherFieldIfNeededVersion3(fieldOptionsText,fieldName,requiredText,underscoreCount,usedFieldNames)}else if("select"===customFieldType){fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->select('${fieldName}', 'form_field', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '${fieldName}');\n         ?>\n      </div>\n   </div>\n</div>`,fieldCode+=generateOtherFieldIfNeededVersion3(fieldOptionsText,fieldName,requiredText,underscoreCount,usedFieldNames)}else if("textarea"===customFieldType){generatePlaceholder(originalText);fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            // @param label-name, if required\n            $input->label('${labelText}', '${labelSuffix}');\n            // @param field name, class, id and attribute\n            $input->textarea('${fieldName}', 'text form_field','${fieldName}','placeholder="Enter your ${originalText.toLowerCase()} here"');\n         ?>\n      </div>\n   </div>\n</div>`}else if("privacy"===customFieldType){privacyPolicyCounter++;fieldCode=`<div class="disclaimer">\n   <p><input type="checkbox" name="${`Docu${privacyPolicyCounter.toString().padStart(2,"0")}`}" style="-webkit-appearance:checkbox" /> &nbsp;<b>${originalText}</b> </p>\n</div>`}else{fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->fields('${fieldName}', 'form_field', '${fieldName}', 'placeholder="${generatePlaceholder(originalText)}"');\n         ?>\n      </div>\n   </div>\n</div>`}else if(lowerText.includes("date")||lowerText.includes("birth")||lowerText.includes("dob")){fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->fields('${fieldName}', 'form_field Date', '${fieldName}', 'placeholder="${generatePlaceholder(originalText)}"');\n         ?>\n      </div>\n   </div>\n</div>`}else if(lowerText.includes("phone")||lowerText.includes("mobile")||lowerText.includes("contact")){fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->phoneInput('${fieldName}', 'form_field','${fieldName}','placeholder="${generatePlaceholder(originalText)}" onkeypress="return isNumberKey(evt)"');\n         ?>\n      </div>\n   </div>\n</div>`}else if(lowerText.includes("email")||lowerText.includes("e-mail")){fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->fields('${fieldName}', 'form_field', '${fieldName}', 'placeholder="${generatePlaceholder(originalText)}"');\n         ?>\n      </div>\n   </div>\n</div>`}else if(lowerText.includes("address")||lowerText.includes("street")||lowerText.includes("city")||lowerText.includes("state")||lowerText.includes("zip")){fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->fields('${fieldName}', 'form_field','${fieldName}','placeholder="${generatePlaceholder(originalText)}"');\n         ?>\n      </div>\n   </div>\n</div>`}else if(lowerText.includes("salary")||lowerText.includes("amount")||lowerText.includes("price")||lowerText.includes("cost"))fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->amount('${fieldName}', '${fieldName}', '');\n         ?>\n      </div>\n   </div>\n</div>`;else if(lowerText.includes("note")||lowerText.includes("description")||lowerText.includes("explanation")){generatePlaceholder(originalText);fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            // @param label-name, if required\n            $input->label('${labelText}', '${labelSuffix}');\n            // @param field name, class, id and attribute\n            $input->textarea('${fieldName}', 'text form_field','${fieldName}','placeholder="Enter your ${fieldName.toLowerCase()} here"');\n         ?>\n      </div>\n   </div>\n</div>`}else if(lowerText.includes("file")||lowerText.includes("upload")||lowerText.includes("attachment")||lowerText.includes("resume"))fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n         ?>\n         <input type="file" name="attachment[]" id="file" class="form_field" multiple>\n      </div>\n   </div>\n</div>`;else if(lowerText.includes("signature")||lowerText.includes("sign"))fieldCode=`<div class="form_box my_signature">\n   <div class="form_box_col2">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n         ?>\n         <div class="sigPad" style="margin-top:5px;">\n            <div class="sig sigWrapper">\n               <div class="typed"></div>\n               <canvas class="pad" width="196" height="50"></canvas>\n            </div>\n         </div>\n      </div>\n   </div>\n</div>`;else{fieldCode=`<div class="form_box">\n   <div class="form_box_col1">\n      <div class="group">\n         <?php\n            $input->label('${labelText}', '${labelSuffix}');\n            $input->fields('${fieldName}', 'form_field', '${fieldName}', 'placeholder="${generatePlaceholder(originalText)}"');\n         ?>\n      </div>\n   </div>\n</div>`}generatedCode+=fieldCode+"\n\n"})),codeOutput.value=generatedCode.trim()}function toggleRequired(index){const button=document.querySelector(`.required-btn[data-index="${index}"]`);if(!button)return;button.classList.contains("required")?(button.classList.remove("required"),button.classList.add("not-required"),button.textContent="Required",fieldRequiredStatus.set(index,!1)):(button.classList.remove("not-required"),button.classList.add("required"),button.textContent="Required ‚úì",fieldRequiredStatus.set(index,!0)),updateGeneratedCode(),"version3"===currentVersion&&generateValidationCode()}function updateGeneratedCode(){const input=document.getElementById("transformInput").value;if(""===input.trim())return;syncRequiredStatusFromDOM();const fieldItems=document.querySelectorAll(".field-item"),lines=input.split("\n"),underscoreCount=parseInt(document.getElementById("underscoreCount").value)||0,usedFieldNames=new Set;generateFormCodeWithRequired(input,Array.from(fieldItems).map(((item,index)=>{const fieldTextElement=item.querySelector(".field-text");let fieldName=fieldTextElement?fieldTextElement.textContent:"";if(!fieldName){fieldName=(lines[index]?lines[index].trim():"").replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),underscoreCount>0&&(fieldName="_".repeat(underscoreCount)+fieldName);let finalFieldName=fieldName,duplicateUnderscoreCount=0;for(;usedFieldNames.has(finalFieldName);)duplicateUnderscoreCount++,finalFieldName=fieldName+"_".repeat(duplicateUnderscoreCount);usedFieldNames.add(finalFieldName),fieldName=finalFieldName}return{name:fieldName,originalText:lines[index]?lines[index].trim():"",required:fieldRequiredStatus.get(index)||!1}}))),"version3"===currentVersion&&generateValidationCode()}function generateFormCodeWithRequired(inputText,fieldData){return"bootstrap"===currentVersion?generateFormCodeWithRequiredBootstrap(inputText,fieldData):generateFormCodeWithRequiredVersion3(inputText,fieldData)}function generateFormCodeWithRequiredBootstrap(inputText,fieldData){const lines=inputText.split("\n").filter((line=>""!==line.trim())),codeOutput=document.getElementById("generatedCodeOutput");let generatedCode="";const usedFieldNames=new Set,underscoreCount=parseInt(document.getElementById("underscoreCount").value)||0;otherFieldCounter=0;let privacyPolicyCounter=0;lines.forEach(((line,index)=>{const originalText=line.trim(),fieldInfo=fieldData[index];if(!fieldInfo)return;let fieldName=fieldInfo.name;underscoreCount>0&&!fieldName.startsWith("_".repeat(underscoreCount))&&(fieldName="_".repeat(underscoreCount)+fieldName);const isRequired=fieldInfo.required,requiredText=isRequired?"'required'":"''";let fieldCode="";const lowerText=originalText.toLowerCase(),customFieldType=fieldTypeOverrides.get(index),fieldOptionsText=fieldOptions.get(index)||"";if(customFieldType)if("header"===customFieldType)fieldCode=`<p class="fieldheader text-center text-uppercase fw-bold py-2 mb-3">${originalText}</p>\n<input type="hidden" name="${fieldName}" value=":" />`;else if("radio"===customFieldType){fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php\n      $input->label('${originalText}', '');\n      $input->radio('${fieldName}', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '${fieldName}', ${requiredText}, '${fieldOptionsText?fieldOptionsText.split(",").length:3}');\n    ?>\n  </div>\n</div>`,fieldCode+=generateOtherFieldIfNeeded(fieldOptionsText,fieldName,requiredText,underscoreCount,usedFieldNames)}else if("checkbox"===customFieldType){fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12 group" data-limit="7">\n    <?php\n      $input->label('${originalText}', '');\n      $input->chkboxVal('${fieldName}', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '${fieldName}', ${requiredText}, '${fieldOptionsText?fieldOptionsText.split(",").length:3}');\n    ?>\n  </div>\n</div>`,fieldCode+=generateOtherFieldIfNeeded(fieldOptionsText,fieldName,requiredText,underscoreCount,usedFieldNames)}else if("select"===customFieldType){fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-4">\n    <?php $input->select('${fieldName}', array(${fieldOptionsText?fieldOptionsText.split(",").map((opt=>`'${opt.trim()}'`)).join(", "):"'Option 1', 'Option 2', 'Option 3'"}), '${fieldName}', ${requiredText}); ?>\n  </div>\n</div>`,fieldCode+=generateOtherFieldIfNeeded(fieldOptionsText,fieldName,requiredText,underscoreCount,usedFieldNames)}else if("textarea"===customFieldType){fieldCode=`<div class="row g-3 mb-3">\n                <div class="col-md-12">\n                    <?php\n                    // @param field name, class, id and attribute\n                    $input->textarea('${fieldName}', 'form-control', '${fieldName}', 'style="height: 100px;"${isRequired?" required":""}', '', ' ', '${originalText}');\n                    ?>\n                </div>\n            </div>`}else if("privacy"===customFieldType){privacyPolicyCounter++;fieldCode=`<div class="disclaimer">\n  <p><input type="checkbox" name="${`Docu${privacyPolicyCounter.toString().padStart(2,"0")}`}" style="-webkit-appearance:checkbox" ${isRequired?"required":""} /> &nbsp;<b>${originalText}</b> </p>\n</div>`}else fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-6">\n    <?php $input->fields('${fieldName}', '', '${fieldName}', ${requiredText}); ?>\n  </div>\n</div>`;else if(lowerText.includes("date")||lowerText.includes("birth")||lowerText.includes("dob"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-4">\n    <?php $input->datepicker('${fieldName}', '${fieldName}', ${requiredText}, 'Date1 DisableFuture', '', '${fieldName}'); ?>\n  </div>\n</div>`;else if(lowerText.includes("email")||lowerText.includes("e-mail"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php $input->email('${fieldName}', '', '${fieldName}', ${requiredText}, '', '', '${fieldName}'); ?>\n  </div>\n</div>`;else if(lowerText.includes("phone")||lowerText.includes("mobile")||lowerText.includes("contact"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php $input->phoneInput('${fieldName}', '', '${fieldName}', ${requiredText}); ?>\n  </div>\n</div>`;else if(lowerText.includes("initial")||lowerText.includes("initials"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-3">\n    <?php $input->fields('${fieldName}', 'initialOnly', '${fieldName}', ${requiredText}); ?>\n  </div>\n</div>`;else if(lowerText.includes("age"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-2">\n    <?php $input->fields('${fieldName}', 'ageOnly', '${fieldName}', ${requiredText}); ?>\n  </div>\n</div>`;else if(lowerText.includes("amount")||lowerText.includes("salary")||lowerText.includes("price")||lowerText.includes("cost"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-3">\n    <?php $input->amount('${fieldName}', '${fieldName}', ${requiredText}); ?>\n  </div>\n</div>`;else if(lowerText.includes("upload")||lowerText.includes("attach")||lowerText.includes("file")||lowerText.includes("document"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php\n      $input->label('${originalText} <span style="font-style: italic; font-size: 13px; text-transform: lowercase; color:#b1b1b1;">(accepted file formats: .doc, .docx, .pdf | Max: 10MB)</span>', '');\n      $input->files('', 'file', '${fieldName}', ${requiredText}, 'doc,docx,pdf,zip', '10MB');\n    ?>\n  </div>\n</div>`;else if(lowerText.includes("signature")||lowerText.includes("sign"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <div class="signature-section">\n      <h5 class="signature-title">${originalText}</h5>\n      <div class="row">\n        <div class="col-md-8">\n          <div class="sigPad signature-pad-container" id="signaturePad">\n            <div class="sig sigWrapper current">\n              <div class="typed"></div>\n              <canvas class="pad" width="100%" height="200"></canvas>\n              <input type="hidden" name="${fieldName}" class="output" ${isRequired?"required":""}>\n            </div>\n            <div class="signature-controls d-flex justify-content-between align-items-center mt-2">\n              <p class="clearButton mb-0">\n                <a href="#clear" class="btn btn-outline-danger btn-sm">\n                  <i class="fas fa-eraser"></i> Clear Signature\n                </a>\n              </p>\n              <small class="text-muted">\n                <i class="fas fa-pen"></i> Draw your signature above\n              </small>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <?php $input->dateToday('Date_Signed', 'Date_Signed', '', 'Date'); ?>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>`;else if(lowerText.includes("number")||lowerText.includes("quantity")||lowerText.includes("count"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-4">\n    <?php $input->fields('${fieldName}', 'numberOnly', '${fieldName}', ${requiredText}); ?>\n  </div>\n</div>`;else if(lowerText.includes("yes")||lowerText.includes("no")||lowerText.includes("gender")||lowerText.includes("marital")||lowerText.includes("status")){let options=[];options=lowerText.includes("yes")||lowerText.includes("no")?["Yes","No"]:lowerText.includes("gender")?["Male","Female"]:lowerText.includes("marital")?["Single","Married","Widowed"]:["Option 1","Option 2","Option 3"],fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php\n      $input->label('${originalText}', '');\n      $input->radio('${fieldName}', array('${options.join("', '")}'), '${fieldName}', ${requiredText}, '${options.length}');\n    ?>\n  </div>\n</div>`}else if(lowerText.includes("select")||lowerText.includes("choose")||lowerText.includes("category")||lowerText.includes("type"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-4">\n    <?php $input->select('${fieldName}', array('Option 1', 'Option 2', 'Option 3'), '${fieldName}', ${requiredText}); ?>\n  </div>\n</div>`;else if(lowerText.includes("check")||lowerText.includes("multiple")||lowerText.includes("interests")||lowerText.includes("hobbies"))fieldCode=`<div class="row g-3 mb-3">\n  <div class="col-md-12 group" data-limit="7">\n    <?php\n      $input->label('${originalText}', '');\n      $input->chkboxVal('${fieldName}', array('Option 1', 'Option 2', 'Option 3'), '${fieldName}', ${requiredText}, '3');\n    ?>\n  </div>\n</div>`;else if(lowerText.includes("comment")||lowerText.includes("description")||lowerText.includes("explanation")||lowerText.includes("note")||lowerText.includes("detail")){fieldCode=`<div class="row g-3 mb-3">\n                <div class="col-md-12">\n                    <?php\n                    // @param field name, class, id and attribute\n                    $input->textarea('${fieldName}', 'form-control', '${fieldName}', 'style="height: 100px;"${isRequired?" required":""}', '', ' ', '${originalText}');\n                    ?>\n                </div>\n            </div>`}else fieldCode=lowerText.includes("header")||lowerText.includes("title")||lowerText.includes("section")?`<p class="fieldheader text-center text-uppercase fw-bold py-2 mb-3">${originalText}</p>\n<input type="hidden" name="${fieldName}" value=":" />`:lowerText.includes("name")||lowerText.includes("first")||lowerText.includes("last")||lowerText.includes("full")?`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php $input->fields('${fieldName}', 'letterOnly', '${fieldName}', ${requiredText}); ?>\n  </div>\n</div>`:lowerText.includes("privacy policy")||lowerText.includes("terms and conditions")||lowerText.includes("data consent")||lowerText.includes("personal information consent")?`<div class="disclaimer">\n  <p><input type="checkbox" name="${fieldName}" style="-webkit-appearance:checkbox" ${isRequired?"required":""} /> &nbsp;<b>${originalText}</b> </p>\n</div>`:`<div class="row g-3 mb-3">\n  <div class="col-md-12">\n    <?php $input->fields('${fieldName}', 'form-control', '${fieldName}', ${requiredText}); ?>\n  </div>\n</div>`;generatedCode+=fieldCode+"\n\n"})),codeOutput.value=generatedCode.trim()}function copyGeneratedCode(){const output=document.getElementById("generatedCodeOutput");""!==output.value.trim()?navigator.clipboard.writeText(output.value).then((()=>{const btn=document.getElementById("copyGeneratedBtn");btn.textContent="Copied!",btn.style.backgroundColor="#d63384",setTimeout((()=>{btn.textContent="Copy",btn.style.backgroundColor="#f06292"}),1500)})).catch((err=>{console.error("Failed to copy code: ",err),alert("Failed to copy code. Please try again.")})):alert("No code to copy! Please enter some text first.")}function copyTransformedText(){syncRequiredStatusFromDOM();const fieldItems=document.querySelectorAll(".field-item");if(0===fieldItems.length)return void alert("No text to copy! Please enter some text first.");let textToCopy="";fieldItems.forEach(((item,index)=>{const fieldName=item.querySelector(".field-text").textContent,isRequired=fieldRequiredStatus.get(index)||!1;textToCopy+=fieldName+(isRequired?" (Required)":"")+"\n"})),navigator.clipboard.writeText(textToCopy.trim()).then((()=>{const btn=document.getElementById("copyTransformBtn");btn.textContent="Copied!",btn.style.backgroundColor="#d63384",setTimeout((()=>{btn.textContent="Copy",btn.style.backgroundColor="#f06292"}),1500)})).catch((err=>{console.error("Failed to copy text: ",err),alert("Failed to copy text. Please try again.")}))}function generateValidationCode(){const fieldItems=document.querySelectorAll(".field-item"),validationOutput=document.getElementById("validationCodeOutput");if(0===fieldItems.length)return void(validationOutput.value="");const requiredFields=[],lines=document.getElementById("transformInput").value.split("\n"),underscoreCount=parseInt(document.getElementById("underscoreCount").value)||0;if(fieldItems.forEach(((item,index)=>{if(fieldRequiredStatus.get(index)||!1){const fieldTextElement=item.querySelector(".field-text");let fieldName=fieldTextElement?fieldTextElement.textContent:"";if(!fieldName){fieldName=(lines[index]?lines[index].trim():"").replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),underscoreCount>0&&(fieldName="_".repeat(underscoreCount)+fieldName);let finalFieldName=fieldName,duplicateUnderscoreCount=0;const usedFieldNames=new Set;for(let i=0;i<index;i++){let prevFieldName=(lines[i]?lines[i].trim():"").replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");underscoreCount>0&&(prevFieldName="_".repeat(underscoreCount)+prevFieldName),usedFieldNames.add(prevFieldName)}for(;usedFieldNames.has(finalFieldName);)duplicateUnderscoreCount++,finalFieldName=fieldName+"_".repeat(duplicateUnderscoreCount);fieldName=finalFieldName}fieldName.includes("'")&&(fieldName=`"${fieldName}"`),requiredFields.push(fieldName)}})),0===requiredFields.length)return void(validationOutput.value="");const rules=requiredFields.map((field=>`\t\t\t\t\t\t\t\t${field}: "required"`)).join(",\n"),messages=requiredFields.map((field=>`\t\t\t\t\t\t\t\t${field}: ""`)).join(",\n"),emailFields=[];fieldItems.forEach(((item,index)=>{const requiredBtn=item.querySelector(".required-btn");if(requiredBtn&&requiredBtn.classList.contains("required")){const line=lines[index]?lines[index].trim():"",lowerText=line.toLowerCase();if(lowerText.includes("email")||lowerText.includes("e-mail")){const fieldTextElement=item.querySelector(".field-text");let fieldName=fieldTextElement?fieldTextElement.textContent:"";if(!fieldName){fieldName=line.replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),underscoreCount>0&&(fieldName="_".repeat(underscoreCount)+fieldName);let finalFieldName=fieldName,duplicateUnderscoreCount=0;const usedFieldNames=new Set;for(let i=0;i<index;i++){let prevFieldName=(lines[i]?lines[i].trim():"").replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");underscoreCount>0&&(prevFieldName="_".repeat(underscoreCount)+prevFieldName),usedFieldNames.add(prevFieldName)}for(;usedFieldNames.has(finalFieldName);)duplicateUnderscoreCount++,finalFieldName=fieldName+"_".repeat(duplicateUnderscoreCount);fieldName=finalFieldName}fieldName.includes("'")&&(fieldName=`"${fieldName}"`),emailFields.push(fieldName)}}}));let finalRules=rules;emailFields.forEach((emailField=>{const emailRule=`\t\t\t\t\t\t\t\t${emailField}: { required: true, email: true }`;finalRules=finalRules.replace(`\t\t\t\t\t\t\t\t${emailField}: "required"`,emailRule)}));const validationCode=`\t\t\t$("#submitform").validate({\n\n\t\t\t\t\t\t\trules: {\n\n\t\t\t\t\t\t\t\t${finalRules}\n\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tmessages: {\n\n\t\t\t\t\t\t\t\t${messages}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t});`;validationOutput.value=validationCode}function copyValidationCode(){const output=document.getElementById("validationCodeOutput");""!==output.value.trim()?navigator.clipboard.writeText(output.value).then((()=>{const btn=document.getElementById("copyValidationBtn");btn.textContent="Copied!",btn.style.backgroundColor="#d63384",setTimeout((()=>{btn.textContent="Copy",btn.style.backgroundColor="#f06292"}),1500)})).catch((err=>{console.error("Failed to copy validation code: ",err),alert("Failed to copy validation code. Please try again.")})):alert("No validation code to copy! Please set required fields first.")}document.addEventListener("DOMContentLoaded",(function(){const validationSection=document.querySelector(".validation-section");validationSection&&(validationSection.style.display="none")})),window.addEventListener("beforeunload",(function(e){e.preventDefault(),e.returnValue=""}));let duplicateData={duplicates:{},originalCode:"",fixedCode:""};function detectDuplicateFieldNames(code){const fieldNames=[],htmlNameRegex=/name\s*=\s*["']([^"']+)["']/gi;let match;for(;null!==(match=htmlNameRegex.exec(code));){const fieldName=match[1].trim();fieldName&&fieldNames.push(fieldName)}const phpFieldRegex=/\$input->\w+\(['"]([^'"]+)['"]/gi;for(;null!==(match=phpFieldRegex.exec(code));){const fieldName=match[1].trim();fieldName&&fieldNames.push(fieldName)}const nameCounts={};fieldNames.forEach((name=>{nameCounts[name]=(nameCounts[name]||0)+1}));const duplicates={};return Object.keys(nameCounts).forEach((name=>{nameCounts[name]>1&&(duplicates[name]=nameCounts[name])})),duplicates}function fixDuplicateFieldNames(code,duplicates){let fixedCode=code;return Object.keys(duplicates).sort().forEach((duplicateName=>{let occurrenceCount=0;const htmlPattern=new RegExp(`name\\s*=\\s*["']${duplicateName.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}["']`,"gi");fixedCode=fixedCode.replace(htmlPattern,(match=>{if(occurrenceCount++,1===occurrenceCount)return match;{const underscores="_".repeat(occurrenceCount-1),newName=`${duplicateName}${underscores}`;return match.replace(duplicateName,newName)}})),occurrenceCount=0;const phpPattern=new RegExp(`\\$input->(?!label\\b)\\w+\\s*\\(\\s*['"]${duplicateName.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}['"]`,"gi");fixedCode=fixedCode.replace(phpPattern,(match=>{if(occurrenceCount++,1===occurrenceCount)return match;{const underscores="_".repeat(occurrenceCount-1),newName=`${duplicateName}${underscores}`;return match.replace(duplicateName,newName)}}))})),fixedCode}function showDuplicateModal(duplicates){const modal=document.getElementById("duplicateModal"),duplicateList=document.getElementById("duplicateList");duplicateList.innerHTML="",Object.keys(duplicates).forEach((name=>{const count=duplicates[name],item=document.createElement("div");item.className="duplicate-item",item.innerHTML=`\n            <span class="duplicate-name">${name}</span>\n            <span class="duplicate-count">${count} occurrences</span>\n        `,duplicateList.appendChild(item)})),modal.style.display="block"}function closeDuplicateModal(){document.getElementById("duplicateModal").style.display="none"}function showNoDuplicatesModal(){document.getElementById("noDuplicatesModal").style.display="block"}function closeNoDuplicatesModal(){document.getElementById("noDuplicatesModal").style.display="none"}function fixDuplicateNames(){if(duplicateData.duplicates&&Object.keys(duplicateData.duplicates).length>0){if(""!==document.getElementById("transformInput").value.trim())updateGeneratedCode();else{const fixedCode=fixDuplicateFieldNames(duplicateData.originalCode,duplicateData.duplicates);document.getElementById("generatedCodeOutput").value=fixedCode}}closeDuplicateModal()}function checkDuplicates(){const code=document.getElementById("generatedCodeOutput").value;if(!code.trim())return void alert("Please paste or generate some form code first.");const duplicates=detectDuplicateFieldNames(code);Object.keys(duplicates).length>0?(duplicateData.duplicates=duplicates,duplicateData.originalCode=code,showDuplicateModal(duplicates)):showNoDuplicatesModal()}document.addEventListener("DOMContentLoaded",(function(){const generatedCodeTextarea=document.getElementById("generatedCodeOutput");generatedCodeTextarea&&generatedCodeTextarea.addEventListener("paste",(function(e){setTimeout((()=>{const pastedCode=this.value,duplicates=detectDuplicateFieldNames(pastedCode);Object.keys(duplicates).length>0&&(duplicateData.duplicates=duplicates,duplicateData.originalCode=pastedCode,showDuplicateModal(duplicates))}),100)})),window.addEventListener("click",(function(e){const duplicateModal=document.getElementById("duplicateModal"),noDuplicatesModal=document.getElementById("noDuplicatesModal");e.target===duplicateModal&&closeDuplicateModal(),e.target===noDuplicatesModal&&closeNoDuplicatesModal()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(closeDuplicateModal(),closeNoDuplicatesModal())}))}));