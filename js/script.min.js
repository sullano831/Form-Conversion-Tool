let currentVersion = "bootstrap";

function syncRequiredStatusFromDOM() { let e = document.querySelectorAll(".field-item");
    e.forEach((e, t) => { let i = e.querySelector(".required-btn"); if (i) { let l = i.classList.contains("required");
            fieldRequiredStatus.set(t, l) } }) }

function switchVersion(e) { currentVersion = e, document.getElementById("bootstrapVersion").classList.toggle("active", "bootstrap" === e), document.getElementById("version3").classList.toggle("active", "version3" === e), document.body.classList.remove("bootstrap", "version3"), document.body.classList.add(e); let t = document.querySelector(".validation-section");
    t && (t.style.display = "version3" === e ? "block" : "none"); let i = document.getElementById("generatedCodeOutput"); if (i.value.trim() && (syncRequiredStatusFromDOM(), updateGeneratedCode()), "version3" === e) { let l = document.querySelectorAll(".field-item");
        l.length > 0 && generateValidationCode() } }
let lastMerged = null,
    lastMergedSelection = null;

function getSelectedCodeBlocks() { let e = document.getElementById("generatedCodeOutput"),
        t = e.value,
        i = e.selectionStart,
        l = e.selectionEnd; if (i === l) return null; if ("version3" === currentVersion) return getSelectedFormBoxBlocksVersion3(); let a = /<div class=\"row[\s\S]*?<\/div>/g,
        s, d = [],
        n = []; for (; null !== (s = a.exec(t));) { let o = s.index,
            r = s.index + s[0].length;
        d.push(s[0]), n.push({ start: o, end: r }) } let c = [],
        p = []; for (let u = 0; u < n.length; u++) { let { start: m, end: v } = n[u];
        v > i && m < l && (c.push(d[u]), p.push({ start: m, end: v })) } if (c.length < 2 || c.length > 4) return null; let f = p[0].start,
        g = p[p.length - 1].end,
        b = t.substring(f, g); return { start: f, end: g, selectedText: b, blockCount: c.length } }

function getSelectedFormBoxBlocksVersion3() { let e = document.getElementById("generatedCodeOutput"),
        t = e.value,
        i = e.selectionStart,
        l = e.selectionEnd; if (i === l) return null; let a = /<div class="form_box">[\s\S]*?<\/div>\s*<\/div>\s*<\/div>/g,
        s, d = [],
        n = []; for (; null !== (s = a.exec(t));) { let o = s.index,
            r = s.index + s[0].length;
        d.push(s[0]), n.push({ start: o, end: r }) } let c = [],
        p = []; for (let u = 0; u < n.length; u++) { let { start: m, end: v } = n[u];
        v > i && m < l && (c.push(d[u]), p.push({ start: m, end: v })) } if (c.length < 2 || c.length > 4) return null; let f = p[0].start,
        g = p[p.length - 1].end,
        b = t.substring(f, g); return { start: f, end: g, selectedText: b, blockCount: c.length } }

function showColumnMergePrompt() { if (document.getElementById("columnMergePrompt")) return; let e = document.createElement("div");
    e.id = "columnMergePrompt", e.className = "column-merge-modal", e.innerHTML = `
        <div class="modal-title">Merge selected fields into columns?</div>
        <button id="mergeColumnsYes" class="modal-btn modal-btn-yes">Yes</button>
        <button id="mergeColumnsNo" class="modal-btn modal-btn-no">No</button>
    `, document.body.appendChild(e), document.getElementById("mergeColumnsYes").onclick = () => { mergeSelectedBlocksToColumns(), document.body.removeChild(e) }, document.getElementById("mergeColumnsNo").onclick = () => { document.body.removeChild(e) } }

function mergeSelectedBlocksToColumns() { let e = document.getElementById("generatedCodeOutput"),
        t = e.value; if ("version3" === currentVersion) return mergeSelectedBlocksToColumnsVersion3(); let i = getSelectedCodeBlocks(); if (!i) return;
    lastMerged = t, lastMergedSelection = { start: i.start, end: i.end }; let l = [],
        a = i.selectedText;
    console.log("Selected text for merging:", a); let s = /<div class="col-md-\d+[^"]*"[^>]*>([\s\S]*?)<\/div>/g,
        d; for (; null !== (d = s.exec(i.selectedText));) { let n = d[0];
        console.log("Extracted column block:", n), l.push(n) } if (![2, 3, 4].includes(l.length) || 12 % l.length != 0) return; let o = 12 / l.length;
    console.log("Captured column blocks:", l), console.log("Column width:", o); let r = l.map((e, t) => { if (console.log(`Processing column ${t}:`, e), e.includes("fieldheader")) { let i = e.replace(/col-md-\d+/, "col-md-12"); return console.log("Header field result:", i), i } { let l = e.replace(/col-md-\d+/, `col-md-${o}`); return console.log("Regular field result:", l), l } }).join("\n  "),
        c = `<div class="row g-3 mb-3">
  ${r}
</div>`;
    c = c.replace(/(<\/div>\s*)+$/, "</div>"); let p = t.substring(0, i.start) + c + t.substring(i.end);
    e.value = p, e.setSelectionRange(i.start, i.start + c.length) }

function mergeSelectedBlocksToColumnsVersion3() { let e = document.getElementById("generatedCodeOutput"),
        t = e.value,
        i = getSelectedFormBoxBlocksVersion3(); if (!i) return;
    lastMerged = t, lastMergedSelection = { start: i.start, end: i.end }, console.log("Selected text for Version 3 merging:", i.selectedText); let l = /<div class="form_box">[\s\S]*?<\/div>\s*<\/div>\s*<\/div>/g,
        a = [],
        s; for (; null !== (s = l.exec(i.selectedText));) { let d = s[0];
        console.log("Extracted form_box:", d), a.push(d) } if (![2, 3, 4].includes(a.length)) return; let n = a.map(e => { let t = e.match(/<div class="group">([\s\S]*?)<\/div>/); return t ? t[1] : "" }),
        o = `form_box_col${a.length}`,
        r = n.map(e => `      <div class="group">
${e.trim()}
      </div>`).join("\n"),
        c = `<div class="form_box">
   <div class="${o}">
${r}
   </div>
</div>`;
    console.log("Merged form_box:", c); let p = t.substring(0, i.start) + c + t.substring(i.end);
    e.value = p, e.setSelectionRange(i.start, i.start + c.length) }

function undoColumnMerge() { if (!lastMerged) return; let e = document.getElementById("generatedCodeOutput");
    e.value = lastMerged, lastMerged = null }

function generateCode(e) { let t = ""; switch (e) {
        case "Field Header":
            t = `<p class="fieldheader text-center text-uppercase fw-bold py-2 mb-3">Applicant Information</p>
<input type="hidden" name="Applicant Information" value=":" />`; break;
        case "Number Only":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->fields('Field Name', 'numberOnly', 'Field_Name', ''); ?>
  </div>
</div>`; break;
        case "Age Only":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-2">
    <?php $input->fields('Age', 'ageOnly', 'Age', ''); ?>
  </div>
</div>`; break;
        case "Letter Only":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-6">
    <?php $input->fields('Name', 'letterOnly', 'Name', ''); ?>
  </div>
</div>`; break;
        case "Normal Text":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-6">
    <?php $input->fields('Field Name', 'form-control', 'Field_Name', ''); ?>
  </div>
</div>`; break;
        case "Initial Only":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-3">
    <?php $input->fields('Initials', 'initialOnly', 'Initials', ''); ?>
  </div>
</div>`; break;
        case "Date Picker":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->datepicker('Date', 'Date', '', 'Date', '', 'Date'); ?>
  </div>
</div>`; break;
        case "Dropdown":
            t = `$state = array('Please select state.', 'Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware', 'District Of Columbia', 'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Puerto Rico', 'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virgin Islands', 'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming');
            
           <div class="col-md-4">
					<?php
					$input->select('State', 'form-select', $state, 'State', 'required', 'State', '', 'State');
					?>
				</div>`; break;
        case "Phone":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-6">
    <?php $input->phoneInput('Phone Number', '', 'Phone', ''); ?>
  </div>
</div>`; break;
        case "Email":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-6">
    <?php $input->email('Email_Address', '', 'Email_Address', '', '', '', 'example@domain.com'); ?>
  </div>
</div>`; break;
        case "Checkbox":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-12 group" data-limit="7">
    <?php
      $input->label('Select Interests', '');
      $input->chkboxVal('Interests', array('Music', 'Sports', 'Reading'), 'Interests', 'required', '3');
    ?>
  </div>
</div>`; break;
        case "Radio":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php
      $input->label('Marital Status', '');
      $input->radio('Marital_Status', array('Single', 'Married', 'Widowed'), 'Marital_Status', 'required', '3');
    ?>
  </div>
</div>`; break;
        case "Date Picker (Disable Past)":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->datepicker('End_Date', 'End_Date', '', 'Date1 DisablePast', '', 'End Date'); ?>
  </div>
</div>`; break;
        case "Amount":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-3">
    <?php $input->amount('Monthly Salary', 'Salary', ''); ?>
  </div>
</div>`; break;
        case "Time":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->time('Start Time', 'Start_Time', ''); ?>
  </div>
</div>`; break;
        case "Textarea":
            t = `<div class="row g-3 mb-3">
                <div class="col-md-12">
                    <?php
                    // @param field name, class, id and attribute
                    $input->textarea('Question_or_Comment', 'form-control', 'Question_or_Comment', 'style="height: 100px;" required', '', ' ', 'Suggestions');
                    ?>
                </div>
            </div>`; break;
        case "Upload File":
            t = `<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php
      $input->label('Upload File <span style="font-style: italic; font-size: 13px; text-transform: lowercase; color:#b1b1b1;">(accepted file formats: .doc, .docx, .pdf | Max: 10MB)</span>', '');
      $input->files('', 'file', '', '', 'doc,docx,pdf,zip', '10MB');
    ?>
  </div>
</div>`; break;
        case "Table":
            t = `<div class="row g-3 mb-3">
        <div class="col-md-12">
          <div class="employment-history-section">
            <h4 class="section-title">Employment History</h4>
            <p class="section-subtitle">Please provide your employment history (starting with most recent)</p>
            
            <div class="table-responsive">
              <table class="table employment-table" id="employmentTable">
                <thead>
                  <tr>
                    <th scope="col">Company Name</th>
                    <th scope="col">Position</th>
                    <th scope="col">Start Date</th>
                    <th scope="col">End Date</th>
                    <th scope="col">Supervisor</th>
                    <th scope="col">Reason for Leaving</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Row 1 -->
                  <tr>
                    <td data-label="Company Name">
                      <input type="text" class="form-control table-input" name="Company_Name_1" placeholder="Company Name">
                    </td>
                    <td data-label="Position">
                      <input type="text" class="form-control table-input" name="Position_1" placeholder="Position/Title">
                    </td>
                    <td data-label="Start Date">
                      <input type="date" class="form-control table-input" name="Start_Date_1">
                    </td>
                    <td data-label="End Date">
                      <input type="date" class="form-control table-input" name="End_Date_1">
                    </td>
                    <td data-label="Supervisor">
                      <input type="text" class="form-control table-input" name="Supervisor_1" placeholder="Supervisor Name">
                    </td>
                    <td data-label="Reason for Leaving">
                      <input type="text" class="form-control table-input" name="Reason_Leaving_1" placeholder="Reason for leaving">
                    </td>
                  </tr>
                  <!-- Row 2 -->
                  <tr>
                    <td data-label="Company Name">
                      <input type="text" class="form-control table-input" name="Company_Name_2" placeholder="Company Name">
                    </td>
                    <td data-label="Position">
                      <input type="text" class="form-control table-input" name="Position_2" placeholder="Position/Title">
                    </td>
                    <td data-label="Start Date">
                      <input type="date" class="form-control table-input" name="Start_Date_2">
                    </td>
                    <td data-label="End Date">
                      <input type="date" class="form-control table-input" name="End_Date_2">
                    </td>
                    <td data-label="Supervisor">
                      <input type="text" class="form-control table-input" name="Supervisor_2" placeholder="Supervisor Name">
                    </td>
                    <td data-label="Reason for Leaving">
                      <input type="text" class="form-control table-input" name="Reason_Leaving_2" placeholder="Reason for leaving">
                    </td>
                  </tr>
                  <!-- Row 3 -->
                  <tr>
                    <td data-label="Company Name">
                      <input type="text" class="form-control table-input" name="Company_Name_3" placeholder="Company Name">
                    </td>
                    <td data-label="Position">
                      <input type="text" class="form-control table-input" name="Position_3" placeholder="Position/Title">
                    </td>
                    <td data-label="Start Date">
                      <input type="date" class="form-control table-input" name="Start_Date_3">
                    </td>
                    <td data-label="End Date">
                      <input type="date" class="form-control table-input" name="End_Date_3">
                    </td>
                    <td data-label="Supervisor">
                      <input type="text" class="form-control table-input" name="Supervisor_3" placeholder="Supervisor Name">
                    </td>
                    <td data-label="Reason for Leaving">
                      <input type="text" class="form-control table-input" name="Reason_Leaving_3" placeholder="Reason for leaving">
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div class="table-note">
              <small class="text-muted">
                <i class="fas fa-info-circle"></i>
                Note: Please fill in at least your most recent employment. Additional rows are optional.
              </small>
            </div>
          </div>
        </div>
      </div>`; break;
        case "Signature":
            t = `<div class="row g-3 mb-3">
        <div class="col-md-12">
          <div class="signature-section">
            <h5 class="signature-title">Signature of Parent/Guardian Required</h5>
            <div class="row">
              <div class="col-md-8">
                <div class="sigPad signature-pad-container" id="signaturePad">
                  <div class="sig sigWrapper current">
                    <div class="typed"></div>
                    <canvas class="pad" width="100%" height="200"></canvas>
                    <input type="hidden" name="Signature_of_Parent_or_Legal_Guardian" class="output">
                  </div>
                  <div class="signature-controls d-flex justify-content-between align-items-center mt-2">
                    <p class="clearButton mb-0">
                      <a href="#clear" class="btn btn-outline-danger btn-sm">
                        <i class="fas fa-eraser"></i> Clear Signature
                      </a>
                    </p>
                    <small class="text-muted">
                      <i class="fas fa-pen"></i> Draw your signature above
                    </small>
                  </div>
                </div>
                <div class="invalid-feedback signature-invalid-feedback" style="display: none;">
                  Please provide your signature before submitting the form.
                </div>
              </div>
              <div class="col-md-4">
                <?php $input->dateToday('Date_Signed', 'Date_Signed', '', 'Date'); ?>
                <div class="signature-note mt-3">
                  <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <strong>Instructions:</strong><br>
                    ‚Ä¢ Use your mouse or finger to sign<br>
                    ‚Ä¢ Sign clearly within the box<br>
                    ‚Ä¢ Click "Clear" to start over
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>`; break;
        case "Privacy Policy":
            t = `
      }else if($key == "Privacy_Policy"){
          $body .= '<tr><td colspan="3" line-height:30px">

          <input type="checkbox" checked disabled /> I consent to the collection and processing of my personal information and, where applicable, health-related information, including any data I submit on behalf of others. This is for the purpose of evaluating or fulfilling my request, in accordance with the Privacy Policy.

          </td></tr>';
      
      <div class="disclaimer">
        <p><input type="checkbox" name="Privacy_Policy" style="-webkit-appearance:checkbox" /> &nbsp;<b>I consent to the collection and processing of my personal information and, where applicable, health-related information, including any data I submit on behalf of others. This is for the purpose of evaluating or fulfilling my request, in accordance with the <a href="<?php echo get_home_url(); ?>/privacy-policy" target="_blank">Privacy Policy</a>.</b> </p>
      </div>` } let i = document.getElementById("codeOutput");
    i.textContent = t, navigator.clipboard.writeText(t).then(() => { let e = document.getElementById("copyBtn");
        e.textContent = "Copied!", setTimeout(() => e.textContent = "Copy", 1500) }) }

function generateCodeForVersion(e) { let t = ""; if ("bootstrap" === currentVersion) return generateCode(e); switch (e) {
        case "Field Header":
            t = `<p class="fieldheader">OTHER FUNCTIONS</p>
<input type="hidden" name="OTHER FUNCTIONS" value=":">`; break;
        case "Number Only":
        case "Normal Text":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Field Name', '');
            $input->fields('Field_Name', 'form_field', 'Field_Name', '');
         ?>
      </div>
   </div>
</div>`; break;
        case "Age Only":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Age', '');
            $input->fields('Age', 'form_field', 'Age', '');
         ?>
      </div>
   </div>
</div>`; break;
        case "Letter Only":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Name', '');
            $input->fields('Name', 'form_field', 'Name', '');
         ?>
      </div>
   </div>
</div>`; break;
        case "Initial Only":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Initials', '');
            $input->fields('Initials', 'form_field', 'Initials', '');
         ?>
      </div>
   </div>
</div>`; break;
        case "Date Picker (Disable Future)":
        case "Date Picker (Disable Past)":
            t = `<div class="form_box">
   <div class="form_box_col2">
      <div class="group">
         <?php
            $input->label('Date', '*');
            $input->fields('Date', 'form_field Date', 'Date', 'placeholder="Enter date here"');
         ?>
      </div>
   </div>
</div>`; break;
        case "Dropdown":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Marital Status', '');
            $input->select('Marital_Status', 'form_field', $choices, 'Marital_Status');
         ?>
      </div>
   </div>
</div>`; break;
        case "Phone":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Phone Number', '*');
            $input->phoneInput('Phone_Number', 'form_field','Phone_Number','placeholder="Enter phone number here" onkeypress="return isNumberKey(evt)"');
         ?>
      </div>
   </div>
</div>`; break;
        case "Email":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Email Address', '');
            $input->fields('Email_Address', 'form_field', 'Email_Address', '');
         ?>
      </div>
   </div>
</div>`; break;
        case "Checkbox":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Available Time', '');
            $input->chkboxVal('Available_Time', array('8:00 am','9:00 am','10:00 am','Other'), '', '', '4');
         ?>
      </div>
   </div>
</div>`; break;
        case "Radio":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Would you be available to work overtime, if necessary?', '');
            $input->radio('Available_to_work_overtime', array('Yes', 'No', 'Maybe'), '', '', '3');
         ?>
      </div>
   </div>
</div>`; break;
        case "Amount":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Monthly Salary', '');
            $input->amount('Salary', 'Salary', '');
         ?>
      </div>
   </div>
</div>`; break;
        case "Time":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php $input->time('Start Time', 'Start_Time', ''); ?>
      </div>
   </div>
</div>`; break;
        case "Textarea":
            t = `<div class="form_box">
                           <div class="form_box_col1">
                              <div class="group">
                                 <?php
                                    // @param label-name, if required
                                    $input->label('Question / Comment');
                                    // @param field name, class, id and attribute
                                    $input->textarea('Question_or_Comment', 'text form_field','Question_or_Comment','placeholder="Enter your question or comment here"');
                                    ?>
                              </div>
                           </div>
                        </div>`; break;
        case "Upload File":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Attach Resume', '*');
         ?>
         <input type="file" name="attachment[]" id="file" class="form_field" multiple>
      </div>
   </div>
</div>`; break;
        case "Table":
            t = `<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('Employment History', '');
         ?>
         <!-- Table content would go here -->
      </div>
   </div>
</div>`; break;
        case "Signature":
            t = `<div class="form_box my_signature">
   <div class="form_box_col2">
      <div class="group">
         <?php
            $input->label('Signature', '');
         ?>
         <div class="sigPad" style="margin-top:5px;">
            <div class="sig sigWrapper">
               <div class="typed"></div>
               <canvas class="pad" width="196" height="50"></canvas>
               <input type="hidden" name="Signature" class="output">
            </div>
            <p class="clearButton"><a style="color:#2f2f2f;" href="#clear">Clear</a></p>
         </div>
      </div>
      <div class="group">
         <?php
            $input->label('Date', '');
         ?>
         <input type="text" class="form_field"  name="Date_" value="<?php echo date('F d, Y'); ?>" style="background: #f1f1f1;" readonly />
      </div>
   </div>
</div>`; break;
        case "Privacy Policy":
            t = `<div class="disclaimer">
   <p><input type="checkbox" name="Privacy_Policy" style="-webkit-appearance:checkbox" /> &nbsp;<b>I consent to the collection and processing of my personal information and, where applicable, health-related information, including any data I submit on behalf of others. This is for the purpose of evaluating or fulfilling my request, in accordance with the <a href="<?php echo get_home_url(); ?>/privacy-policy" target="_blank">Privacy Policy</a>.</b> </p>
</div>` } let i = document.getElementById("codeOutput");
    i.textContent = t, navigator.clipboard.writeText(t).then(() => { let e = document.getElementById("copyBtn");
        e.textContent = "Copied!", setTimeout(() => e.textContent = "Copy", 1500) }) }

function copyCode() { let e = document.getElementById("codeOutput");
    navigator.clipboard.writeText(e.textContent).then(() => { let e = document.getElementById("copyBtn");
        e.textContent = "Copied!", setTimeout(() => e.textContent = "Copy", 1500) }) }
document.addEventListener("DOMContentLoaded", function() { let e = document.getElementById("generatedCodeOutput");
    e && (e.addEventListener("mouseup", function() { setTimeout(() => { let e = getSelectedCodeBlocks();
            e && showColumnMergePrompt() }, 10) }), syncRequiredStatusFromDOM()) }), document.addEventListener("DOMContentLoaded", function() { let e = document.getElementById("undoColumnMergeBtn");
    e && (e.onclick = undoColumnMerge); let t = document.getElementById("fieldTypeSearch"),
        i = document.getElementById("fieldTypeButtons");
    t && i && (t.addEventListener("input", function() { let e = this.value.toLowerCase().trim(),
            t = i.querySelectorAll(".btn-tool");
        t.forEach(t => { let i = t.textContent.toLowerCase(),
                l = t.getAttribute("data-field-type"); "" === e || i.includes(e) || l.includes(e) ? (t.style.display = "inline-flex", t.style.opacity = "1") : (t.style.display = "none", t.style.opacity = "0") }) }), document.addEventListener("click", function(e) { if (!t.contains(e.target) && !i.contains(e.target)) { t.value = ""; let l = i.querySelectorAll(".btn-tool");
            l.forEach(e => { e.style.display = "inline-flex", e.style.opacity = "1" }) } })) });
let currentFieldIndex = -1,
    fieldTypeOverrides = new Map,
    fieldOptions = new Map,
    fieldRequiredStatus = new Map,
    otherFieldCounter = 0;

function transformText() { let e = document.getElementById("transformInput").value,
        t = document.getElementById("transformOutputContainer"),
        i = parseInt(document.getElementById("underscoreCount").value) || 0; if ("" === e.trim()) { t.innerHTML = '<div style="color: #6c757d; font-style: italic; text-align: center; padding: 20px;">Transformed text will appear here...</div>', document.getElementById("generatedCodeOutput").value = ""; return } let l = e.split("\n"),
        a = new Set,
        s = "";
    l.forEach((e, t) => { if ("" === e.trim()) return; let l = e.trim().replace(/\//g, "or").replace(/[^a-zA-Z0-9_?()]/g, "_").replace(/_+/g, "_").replace(/^_|_$/g, "");
                i > 0 && (l = "_".repeat(i) + l); let d = l,
                    n = 0; for (; a.has(d);) n++, d = l + "_".repeat(n);
                a.add(d); let o = fieldTypeOverrides.get(t) || "normal",
                    r = fieldOptions.get(t) || "";
                s += `
            <div class="field-item" data-field-name="${d}" data-index="${t}">
                <span class="field-text">${d}</span>
                <div class="field-controls">
                    <div class="field-type-buttons">
                        <button class="field-type-btn ${"normal"===o?"active":""}" onclick="setFieldType(${t}, 'normal')" title="Normal Text">
                            üìù
                        </button>
                        <button class="field-type-btn ${"header"===o?"active":""}" onclick="setFieldType(${t}, 'header')" title="Field Header">
                            üìÑ
                        </button>
                        <button class="field-type-btn ${"radio"===o?"active":""}" onclick="setFieldType(${t}, 'radio')" title="Radio Buttons">
                            üîò
                        </button>
                        <button class="field-type-btn ${"select"===o?"active":""}" onclick="setFieldType(${t}, 'select')" title="Dropdown">
                            üìã
                        </button>
                        <button class="field-type-btn ${"checkbox"===o?"active":""}" onclick="setFieldType(${t}, 'checkbox')" title="Checkbox">
                            ‚òëÔ∏è
                        </button>
                        <button class="field-type-btn ${"privacy"===o?"active":""}" onclick="setFieldType(${t}, 'privacy')" title="Docu Checkbox">
                            üîí
                        </button>
                        <button class="field-type-btn ${"textarea"===o?"active":""}" onclick="setFieldType(${t}, 'textarea')" title="Textarea">
                            <span class="textarea-icon">üìù</span>
                        </button>
                    </div>
                    ${"radio"===o||"select"===o||"checkbox"===o?`
                        <div class="options-input">
                            <input type="text" class="options-textbox" placeholder="option 1, option 2, option 3" 
                                   value="${r}" 
                                   oninput="setFieldOptions(${t}, this.value)" 
                                   onchange="setFieldOptions(${t}, this.value)" 
                                   onblur="setFieldOptions(${t}, this.value)">
                        </div>
                    `:""}
                    ${"header"!==o&&"privacy"!==o?`
                    <button class="required-btn ${fieldRequiredStatus.get(t)?"required":"not-required"}" onclick="toggleRequired(${t})" data-index="${t}">
                        ${fieldRequiredStatus.get(t)?"Required ‚úì":"Required"}
                    </button>
                    `:""}
                </div>
            </div>
        `}),t.innerHTML=s;let d=document.querySelectorAll(".field-item");d.forEach((e,t)=>{fieldRequiredStatus.has(t)||fieldRequiredStatus.set(t,!1)}),generateFormCode(e),"version3"===currentVersion&&generateValidationCode()}function setFieldType(e,t){fieldTypeOverrides.set(e,t),"normal"===t&&fieldOptions.delete(e),transformText(),updateGeneratedCode()}function setFieldOptions(e,t){fieldOptions.set(e,t),updateGeneratedCode(),generateValidationCode()}function generatePlaceholder(e){if(!e)return"";let t=e.toLowerCase();return`Enter ${t} here`}function generateOtherFieldIfNeeded(e,t,i,l=0,a=null){if(!e)return"";let s=e.split(",").map(e=>e.trim().toLowerCase()),d=s.includes("other");if(d){otherFieldCounter++;let n=l>0?"_".repeat(l):"",o=n+"other";if(a){let r=o,c=0;for(;a.has(r);)c++,r=o+"_".repeat(c);a.add(r),o=r}return`
        <div class="row g-3 mb-3" id="${n}ifOther${otherFieldCounter}">
          <div class="col-md-12">
            <?php $input->fields('${o}', 'form-control', '${o}', ${i}); ?>
          </div>
        </div>`}return""}function generateOtherFieldIfNeededVersion3(e,t,i,l=0,a=null){if(!e)return"";let s=e.split(",").map(e=>e.trim().toLowerCase()),d=s.includes("other");if(d){otherFieldCounter++;let n=l>0?"_".repeat(l):"",o=n+"other";if(a){let r=o,c=0;for(;a.has(r);)c++,r=o+"_".repeat(c);a.add(r),o=r}let p=generatePlaceholder("other");return`
        <div class="form_box" id="ifOther${otherFieldCounter}">
           <div class="form_box_col1">
              <div class="group">
                 <?php
                    $input->label('${o}', '');
                    $input->fields('${o}', 'form_field', '${o}', 'placeholder="${p}"');
                 ?>
              </div>
           </div>
        </div>`}return""}function generateFormCode(e){return"bootstrap"===currentVersion?generateFormCodeBootstrap(e):generateFormCodeVersion3(e)}function generateFormCodeBootstrap(e){let t=e.split("\n").filter(e=>""!==e.trim()),i=document.getElementById("generatedCodeOutput"),l="",a=new Set,s=parseInt(document.getElementById("underscoreCount").value)||0;otherFieldCounter=0;let d=0;t.forEach((e,t)=>{let i=e.trim(),n=i.replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");s>0&&(n="_".repeat(s)+n);let o=n,r=0;for(;a.has(o);)r++,o=n+"_".repeat(r);a.add(o);let c="",p=i.toLowerCase(),u=fieldTypeOverrides.get(t),m=fieldOptions.get(t)||"",v=i;if(u){if("header"===u)c=`<p class="fieldheader text-center text-uppercase fw-bold py-2 mb-3">${i}</p>
<input type="hidden" name="${o}" value=":" />`;else if("radio"===u){let f=m?m.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";c=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php
      $input->label('${v}', '');
      $input->radio('${o}', array(${f}), '${o}', '', '${m?m.split(",").length:3}');
    ?>
  </div>
</div>`,c+=generateOtherFieldIfNeeded(m,o,"''",s,a)}else if("checkbox"===u){let g=m?m.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";c=`<div class="row g-3 mb-3">
  <div class="col-md-12 group" data-limit="7">
    <?php
      $input->label('${v}', '');
      $input->chkboxVal('${o}', array(${g}), '${o}', '', '${m?m.split(",").length:3}');
    ?>
  </div>
</div>`,c+=generateOtherFieldIfNeeded(m,o,"''",s,a)}else if("select"===u){let b=m?m.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";c=`<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->select('${o}', array(${b}), '${o}', ''); ?>
  </div>i clicked
</div>`,c+=generateOtherFieldIfNeeded(m,o,"''",s,a)}else if("textarea"===u){let h=document.querySelector(`.field-item[data-index="${t}"]`),y=h&&h.querySelector(".required-btn")&&h.querySelector(".required-btn").classList.contains("required");c=`<div class="row g-3 mb-3">
                <div class="col-md-12">
                    <?php
                    // @param field name, class, id and attribute
                    $input->textarea('${o}', 'form-control', '${o}', 'style="height: 100px;"${y?" required":""}', '', ' ', '${i}');
                    ?>
                </div>
            </div>`}else if("privacy"===u){let x=document.querySelector(`.field-item[data-index="${t}"]`),C=x&&x.querySelector(".required-btn")&&x.querySelector(".required-btn").classList.contains("required");d++;let w=`Docu${d.toString().padStart(2,"0")}`;c=`<div class="disclaimer">
  <p><input type="checkbox" name="${w}" style="-webkit-appearance:checkbox" ${C?"required":""} /> &nbsp;<b>${i}</b> </p>
</div>`}else c=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php $input->fields('${o}', 'form-control', '${o}', ''); ?>
  </div>
</div>`}else if(p.includes("date")||p.includes("birth")||p.includes("dob"))c=`<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->datepicker('${o}', '${o}', '', 'Date', '', '${v}'); ?>
  </div>
</div>`;else if(p.includes("email")||p.includes("e-mail"))c=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php $input->email('${o}', '', '${o}', '', '', '', '${v}'); ?>
  </div>
</div>`;else if(p.includes("phone")||p.includes("mobile")||p.includes("contact"))c=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php $input->phoneInput('${o}', '', '${o}', ''); ?>
  </div>
</div>`;else if(p.includes("initial")||p.includes("initials"))c=`<div class="row g-3 mb-3">
  <div class="col-md-3">
    <?php $input->fields('${o}', 'initialOnly', '${o}', ''); ?>
  </div>
</div>`;else if(p.includes("age"))c=`<div class="row g-3 mb-3">
  <div class="col-md-2">
    <?php $input->fields('${o}', 'ageOnly', '${o}', ''); ?>
  </div>
</div>`;else if(p.includes("amount")||p.includes("salary")||p.includes("price")||p.includes("cost"))c=`<div class="row g-3 mb-3">
  <div class="col-md-3">
    <?php $input->amount('${o}', '${o}', ''); ?>
  </div>
</div>`;else if(p.includes("upload")||p.includes("attach")||p.includes("file")||p.includes("document"))c=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php
      $input->label('${v} <span style="font-style: italic; font-size: 13px; text-transform: lowercase; color:#b1b1b1;">(accepted file formats: .doc, .docx, .pdf | Max: 10MB)</span>', '');
      $input->files('', 'file', '${o}', '', 'doc,docx,pdf,zip', '10MB');
    ?>
  </div>
</div>`;else if(p.includes("signature")||p.includes("sign"))c=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <div class="signature-section">
      <h5 class="signature-title">${v}</h5>
      <div class="row">
        <div class="col-md-8">
          <div class="sigPad signature-pad-container" id="signaturePad">
            <div class="sig sigWrapper current">
              <div class="typed"></div>
              <canvas class="pad" width="100%" height="200"></canvas>
              <input type="hidden" name="${o}" class="output">
            </div>
            <div class="signature-controls d-flex justify-content-between align-items-center mt-2">
              <p class="clearButton mb-0">
                <a href="#clear" class="btn btn-outline-danger btn-sm">
                  <i class="fas fa-eraser"></i> Clear Signature
                </a>
              </p>
              <small class="text-muted">
                <i class="fas fa-pen"></i> Draw your signature above
              </small>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <?php $input->dateToday('Date_Signed', 'Date_Signed', '', 'Date'); ?>
        </div>
      </div>
    </div>
  </div>
</div>`;else if(p.includes("number")||p.includes("quantity")||p.includes("count"))c=`<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->fields('${o}', 'numberOnly', '${o}', ''); ?>
  </div>
</div>`;else if(p.includes("yes")||p.includes("no")||p.includes("gender")||p.includes("marital")||p.includes("status")){let _=[];_=p.includes("yes")||p.includes("no")?["Yes","No"]:p.includes("gender")?["Male","Female"]:p.includes("marital")?["Single","Married","Widowed"]:["Option 1","Option 2","Option 3"],c=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php
      $input->label('${v}', '');
      $input->radio('${o}', array('${_.join("', '")}'), '${o}', '', '${_.length}');
    ?>
  </div>
</div>`}else if(p.includes("select")||p.includes("choose")||p.includes("category")||p.includes("type"))c=`<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->select('${o}', array('Option 1', 'Option 2', 'Option 3'), '${o}', ''); ?>
  </div>
</div>`;else if(p.includes("check")||p.includes("multiple")||p.includes("interests")||p.includes("hobbies"))c=`<div class="row g-3 mb-3">
  <div class="col-md-12 group" data-limit="7">
    <?php
      $input->label('${v}', '');
      $input->chkboxVal('${o}', array('Option 1', 'Option 2', 'Option 3'), '${o}', '', '3');
    ?>
  </div>
</div>`;else if(p.includes("comment")||p.includes("description")||p.includes("explanation")||p.includes("note")||p.includes("detail")){let k=document.querySelector(`.field-item[data-index="${t}"]`),$=k&&k.querySelector(".required-btn")&&k.querySelector(".required-btn").classList.contains("required");c=`<div class="row g-3 mb-3">
                <div class="col-md-12">
                    <?php
                    // @param field name, class, id and attribute
                    $input->textarea('${o}', 'form-control', '${o}', 'style="height: 100px;"${$?" required":""}', '', ' ', '${i}');
                    ?>
                </div>
            </div>`}else c=p.includes("header")||p.includes("title")||p.includes("section")?`<p class="fieldheader text-center text-uppercase fw-bold py-2 mb-3">${i}</p>
<input type="hidden" name="${o}" value=":" />`:p.includes("name")||p.includes("first")||p.includes("last")||p.includes("full")?`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php $input->fields('${o}', 'letterOnly', '${o}', ''); ?>
  </div>
</div>`:p.includes("privacy policy")||p.includes("terms and conditions")||p.includes("data consent")||p.includes("personal information consent")?`<div class="disclaimer">
  <p><input type="checkbox" name="${o}" style="-webkit-appearance:checkbox" ${isRequired?"required":""} /> &nbsp;<b>${i}</b> </p>
</div>`:`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php $input->fields('${o}', 'form-control', '${o}', ''); ?>
  </div>
</div>`;l+=c+"\n\n"}),i.value=l.trim()}function generateFormCodeVersion3(e){let t=e.split("\n").filter(e=>""!==e.trim()),i=document.getElementById("generatedCodeOutput"),l="",a=new Set,s=parseInt(document.getElementById("underscoreCount").value)||0;otherFieldCounter=0;let d=0;t.forEach((e,t)=>{let i=e.trim(),n=i.replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");s>0&&(n="_".repeat(s)+n);let o=n,r=0;for(;a.has(o);)r++,o=n+"_".repeat(r);a.add(o);let c=document.querySelector(`.field-item[data-index="${t}"]`),p=c&&c.querySelector(".required-btn")&&c.querySelector(".required-btn").classList.contains("required"),u=p?"'required'":"''",m="",v=i.toLowerCase(),f=fieldTypeOverrides.get(t),g=fieldOptions.get(t)||"",b=i,h=p?"*":"";if(f){if("header"===f)m=`<p class="fieldheader">${i}</p>
<input type="hidden" name="${o}" value=":" />`;else if("radio"===f){let y=g?g.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
            $input->radio('${o}', array(${y}), '', '', '${g?g.split(",").length:3}');
         ?>
      </div>
   </div>
</div>`,m+=generateOtherFieldIfNeededVersion3(g,o,u,s,a)}else if("checkbox"===f){let x=g?g.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
            $input->chkboxVal('${o}', array(${x}), '', '', '${g?g.split(",").length:3}');
         ?>
      </div>
   </div>
</div>`,m+=generateOtherFieldIfNeededVersion3(g,o,u,s,a)}else if("select"===f){let C=g?g.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
            $input->select('${o}', 'form_field', array(${C}), '${o}');
         ?>
      </div>
   </div>
</div>`,m+=generateOtherFieldIfNeededVersion3(g,o,u,s,a)}else if("textarea"===f)m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            // @param label-name, if required
            $input->label('${b}', '${h}');
            // @param field name, class, id and attribute
            $input->textarea('${o}', 'text form_field','${o}','placeholder="Enter your ${i.toLowerCase()} here"');
         ?>
      </div>
   </div>
</div>`;else if("privacy"===f){d++;let w=`Docu${d.toString().padStart(2,"0")}`;m=`<div class="disclaimer">
   <p><input type="checkbox" name="${w}" style="-webkit-appearance:checkbox" /> &nbsp;<b>${i}</b> </p>
</div>`}else{let _=generatePlaceholder(i);m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
            $input->fields('${o}', 'form_field', '${o}', 'placeholder="${_}"');
         ?>
      </div>
   </div>
</div>`}}else if(v.includes("date")||v.includes("birth")||v.includes("dob"))m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
            $input->fields('${o}', 'form_field Date', '${o}', 'placeholder="Enter date here"');
         ?>
      </div>
   </div>
</div>`;else if(v.includes("phone")||v.includes("mobile")||v.includes("contact"))m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
            $input->phoneInput('${o}', 'form_field','${o}','placeholder="Enter phone number here" onkeypress="return isNumberKey(evt)"');
         ?>
      </div>
   </div>
</div>`;else if(v.includes("email")||v.includes("e-mail"))m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
            $input->fields('${o}', 'form_field', '${o}', '');
         ?>
      </div>
   </div>
</div>`;else if(v.includes("address")||v.includes("street")||v.includes("city")||v.includes("state")||v.includes("zip"))m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
            $input->fields('${o}', 'form_field','${o}','placeholder="Enter ${v} here"');
         ?>
      </div>
   </div>
</div>`;else if(v.includes("salary")||v.includes("amount")||v.includes("price")||v.includes("cost"))m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
            $input->amount('${o}', '${o}', '');
         ?>
      </div>
   </div>
</div>`;else if(v.includes("comment")||v.includes("note")||v.includes("description")||v.includes("explanation"))m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            // @param label-name, if required
            $input->label('${b}', '${h}');
            // @param field name, class, id and attribute
            $input->textarea('${o}', 'text form_field','${o}','placeholder="Enter your ${i.toLowerCase()} here"');
         ?>
      </div>
   </div>
</div>`;else if(v.includes("file")||v.includes("upload")||v.includes("attachment")||v.includes("resume"))m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
         ?>
         <input type="file" name="attachment[]" id="file" class="form_field" multiple>
      </div>
   </div>
</div>`;else if(v.includes("signature")||v.includes("sign"))m=`<div class="form_box my_signature">
   <div class="form_box_col2">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
         ?>
         <div class="sigPad" style="margin-top:5px;">
            <div class="sig sigWrapper">
               <div class="typed"></div>
               <canvas class="pad" width="196" height="50"></canvas>
            </div>
         </div>
      </div>
   </div>
</div>`;else{let k=generatePlaceholder(i);m=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${b}', '${h}');
            $input->fields('${o}', 'form_field', '${o}', 'placeholder="${k}"');
         ?>
      </div>
   </div>
</div>`}l+=m+"\n\n"}),i.value=l.trim()}function generateFormCodeWithRequiredVersion3(e,t){let i=e.split("\n").filter(e=>""!==e.trim()),l=document.getElementById("generatedCodeOutput"),a="",s=new Set,d=parseInt(document.getElementById("underscoreCount").value)||0;otherFieldCounter=0;let n=0;i.forEach((e,i)=>{let l=t[i];if(!l)return;let o=l.name;d>0&&!o.startsWith("_".repeat(d))&&(o="_".repeat(d)+o);let r=l.required,c=r?"'required'":"''",p="",u=l.originalText,m=u.toLowerCase(),v=fieldTypeOverrides.get(i),f=fieldOptions.get(i)||"",g=u,b=r?"*":"";if(v){if("header"===v)p=`<p class="fieldheader">${u}</p>
<input type="hidden" name="${o}" value=":" />`;else if("radio"===v){let h=f?f.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
            $input->radio('${o}', array(${h}), '', '', '${f?f.split(",").length:3}');
         ?>
      </div>
   </div>
</div>`,p+=generateOtherFieldIfNeededVersion3(f,o,c,d,s)}else if("checkbox"===v){let y=f?f.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
            $input->chkboxVal('${o}', array(${y}), '', '', '${f?f.split(",").length:3}');
         ?>
      </div>
   </div>
</div>`,p+=generateOtherFieldIfNeededVersion3(f,o,c,d,s)}else if("select"===v){let x=f?f.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
            $input->select('${o}', 'form_field', array(${x}), '${o}');
         ?>
      </div>
   </div>
</div>`,p+=generateOtherFieldIfNeededVersion3(f,o,c,d,s)}else if("textarea"===v)generatePlaceholder(u),p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            // @param label-name, if required
            $input->label('${g}', '${b}');
            // @param field name, class, id and attribute
            $input->textarea('${o}', 'text form_field','${o}','placeholder="Enter your ${u.toLowerCase()} here"');
         ?>
      </div>
   </div>
</div>`;else if("privacy"===v){n++;let C=`Docu${n.toString().padStart(2,"0")}`;p=`<div class="disclaimer">
   <p><input type="checkbox" name="${C}" style="-webkit-appearance:checkbox" /> &nbsp;<b>${u}</b> </p>
</div>`}else{let w=generatePlaceholder(u);p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
            $input->fields('${o}', 'form_field', '${o}', 'placeholder="${w}"');
         ?>
      </div>
   </div>
</div>`}}else if(m.includes("date")||m.includes("birth")||m.includes("dob")){let _=generatePlaceholder(u);p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
            $input->fields('${o}', 'form_field Date', '${o}', 'placeholder="${_}"');
         ?>
      </div>
   </div>
</div>`}else if(m.includes("phone")||m.includes("mobile")||m.includes("contact")){let k=generatePlaceholder(u);p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
            $input->phoneInput('${o}', 'form_field','${o}','placeholder="${k}" onkeypress="return isNumberKey(evt)"');
         ?>
      </div>
   </div>
</div>`}else if(m.includes("email")||m.includes("e-mail")){let $=generatePlaceholder(u);p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
            $input->fields('${o}', 'form_field', '${o}', 'placeholder="${$}"');
         ?>
      </div>
   </div>
</div>`}else if(m.includes("address")||m.includes("street")||m.includes("city")||m.includes("state")||m.includes("zip")){let O=generatePlaceholder(u);p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
            $input->fields('${o}', 'form_field','${o}','placeholder="${O}"');
         ?>
      </div>
   </div>
</div>`}else if(m.includes("salary")||m.includes("amount")||m.includes("price")||m.includes("cost"))p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
            $input->amount('${o}', '${o}', '');
         ?>
      </div>
   </div>
</div>`;else if(m.includes("note")||m.includes("description")||m.includes("explanation"))generatePlaceholder(u),p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            // @param label-name, if required
            $input->label('${g}', '${b}');
            // @param field name, class, id and attribute
            $input->textarea('${o}', 'text form_field','${o}','placeholder="Enter your ${o.toLowerCase()} here"');
         ?>
      </div>
   </div>
</div>`;else if(m.includes("file")||m.includes("upload")||m.includes("attachment")||m.includes("resume"))p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
         ?>
         <input type="file" name="attachment[]" id="file" class="form_field" multiple>
      </div>
   </div>
</div>`;else if(m.includes("signature")||m.includes("sign"))p=`<div class="form_box my_signature">
   <div class="form_box_col2">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
         ?>
         <div class="sigPad" style="margin-top:5px;">
            <div class="sig sigWrapper">
               <div class="typed"></div>
               <canvas class="pad" width="196" height="50"></canvas>
            </div>
         </div>
      </div>
   </div>
</div>`;else{let S=generatePlaceholder(u);p=`<div class="form_box">
   <div class="form_box_col1">
      <div class="group">
         <?php
            $input->label('${g}', '${b}');
            $input->fields('${o}', 'form_field', '${o}', 'placeholder="${S}"');
         ?>
      </div>
   </div>
</div>`}a+=p+"\n\n"}),l.value=a.trim()}function toggleRequired(e){let t=document.querySelector(`.required-btn[data-index="${e}"]`);if(!t)return;let i=t.classList.contains("required");i?(t.classList.remove("required"),t.classList.add("not-required"),t.textContent="Required",fieldRequiredStatus.set(e,!1)):(t.classList.remove("not-required"),t.classList.add("required"),t.textContent="Required ‚úì",fieldRequiredStatus.set(e,!0)),updateGeneratedCode(),"version3"===currentVersion&&generateValidationCode()}function updateGeneratedCode(){let e=document.getElementById("transformInput").value;if(""===e.trim())return;syncRequiredStatusFromDOM();let t=document.querySelectorAll(".field-item"),i=e.split("\n"),l=parseInt(document.getElementById("underscoreCount").value)||0,a=new Set,s=Array.from(t).map((e,t)=>{let s=e.querySelector(".field-text"),d=s?s.textContent:"";if(!d){d=(i[t]?i[t].trim():"").replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),l>0&&(d="_".repeat(l)+d);let n=d,o=0;for(;a.has(n);)o++,n=d+"_".repeat(o);a.add(n),d=n}return{name:d,originalText:i[t]?i[t].trim():"",required:fieldRequiredStatus.get(t)||!1}});generateFormCodeWithRequired(e,s),"version3"===currentVersion&&generateValidationCode()}function generateFormCodeWithRequired(e,t){return"bootstrap"===currentVersion?generateFormCodeWithRequiredBootstrap(e,t):generateFormCodeWithRequiredVersion3(e,t)}function generateFormCodeWithRequiredBootstrap(e,t){let i=e.split("\n").filter(e=>""!==e.trim()),l=document.getElementById("generatedCodeOutput"),a="",s=new Set,d=parseInt(document.getElementById("underscoreCount").value)||0;otherFieldCounter=0;let n=0;i.forEach((e,i)=>{let l=e.trim(),o=t[i];if(!o)return;let r=o.name;d>0&&!r.startsWith("_".repeat(d))&&(r="_".repeat(d)+r);let c=o.required,p=c?"'required'":"''",u="",m=l.toLowerCase(),v=fieldTypeOverrides.get(i),f=fieldOptions.get(i)||"";if(v){if("header"===v)u=`<p class="fieldheader text-center text-uppercase fw-bold py-2 mb-3">${l}</p>
<input type="hidden" name="${r}" value=":" />`;else if("radio"===v){let g=f?f.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";u=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php
      $input->label('${l}', '');
      $input->radio('${r}', array(${g}), '${r}', ${p}, '${f?f.split(",").length:3}');
    ?>
  </div>
</div>`,u+=generateOtherFieldIfNeeded(f,r,p,d,s)}else if("checkbox"===v){let b=f?f.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";u=`<div class="row g-3 mb-3">
  <div class="col-md-12 group" data-limit="7">
    <?php
      $input->label('${l}', '');
      $input->chkboxVal('${r}', array(${b}), '${r}', ${p}, '${f?f.split(",").length:3}');
    ?>
  </div>
</div>`,u+=generateOtherFieldIfNeeded(f,r,p,d,s)}else if("select"===v){let h=f?f.split(",").map(e=>`'${e.trim()}'`).join(", "):"'Option 1', 'Option 2', 'Option 3'";u=`<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->select('${r}', array(${h}), '${r}', ${p}); ?>
  </div>
</div>`,u+=generateOtherFieldIfNeeded(f,r,p,d,s)}else if("textarea"===v)u=`<div class="row g-3 mb-3">
                <div class="col-md-12">
                    <?php
                    // @param field name, class, id and attribute
                    $input->textarea('${r}', 'form-control', '${r}', 'style="height: 100px;"${c?" required":""}', '', ' ', '${l}');
                    ?>
                </div>
            </div>`;else if("privacy"===v){n++;let y=`Docu${n.toString().padStart(2,"0")}`;u=`<div class="disclaimer">
  <p><input type="checkbox" name="${y}" style="-webkit-appearance:checkbox" ${c?"required":""} /> &nbsp;<b>${l}</b> </p>
</div>`}else u=`<div class="row g-3 mb-3">
  <div class="col-md-6">
    <?php $input->fields('${r}', '', '${r}', ${p}); ?>
  </div>
</div>`}else if(m.includes("date")||m.includes("birth")||m.includes("dob"))u=`<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->datepicker('${r}', '${r}', ${p}, 'Date', '', '${r}'); ?>
  </div>
</div>`;else if(m.includes("email")||m.includes("e-mail"))u=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php $input->email('${r}', '', '${r}', ${p}, '', '', '${r}'); ?>
  </div>
</div>`;else if(m.includes("phone")||m.includes("mobile")||m.includes("contact"))u=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php $input->phoneInput('${r}', '', '${r}', ${p}); ?>
  </div>
</div>`;else if(m.includes("initial")||m.includes("initials"))u=`<div class="row g-3 mb-3">
  <div class="col-md-3">
    <?php $input->fields('${r}', 'initialOnly', '${r}', ${p}); ?>
  </div>
</div>`;else if(m.includes("age"))u=`<div class="row g-3 mb-3">
  <div class="col-md-2">
    <?php $input->fields('${r}', 'ageOnly', '${r}', ${p}); ?>
  </div>
</div>`;else if(m.includes("amount")||m.includes("salary")||m.includes("price")||m.includes("cost"))u=`<div class="row g-3 mb-3">
  <div class="col-md-3">
    <?php $input->amount('${r}', '${r}', ${p}); ?>
  </div>
</div>`;else if(m.includes("upload")||m.includes("attach")||m.includes("file")||m.includes("document"))u=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php
      $input->label('${l} <span style="font-style: italic; font-size: 13px; text-transform: lowercase; color:#b1b1b1;">(accepted file formats: .doc, .docx, .pdf | Max: 10MB)</span>', '');
      $input->files('', 'file', '${r}', ${p}, 'doc,docx,pdf,zip', '10MB');
    ?>
  </div>
</div>`;else if(m.includes("signature")||m.includes("sign"))u=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <div class="signature-section">
      <h5 class="signature-title">${l}</h5>
      <div class="row">
        <div class="col-md-8">
          <div class="sigPad signature-pad-container" id="signaturePad">
            <div class="sig sigWrapper current">
              <div class="typed"></div>
              <canvas class="pad" width="100%" height="200"></canvas>
              <input type="hidden" name="${r}" class="output" ${c?"required":""}>
            </div>
            <div class="signature-controls d-flex justify-content-between align-items-center mt-2">
              <p class="clearButton mb-0">
                <a href="#clear" class="btn btn-outline-danger btn-sm">
                  <i class="fas fa-eraser"></i> Clear Signature
                </a>
              </p>
              <small class="text-muted">
                <i class="fas fa-pen"></i> Draw your signature above
              </small>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <?php $input->dateToday('Date_Signed', 'Date_Signed', '', 'Date'); ?>
        </div>
      </div>
    </div>
  </div>
</div>`;else if(m.includes("number")||m.includes("quantity")||m.includes("count"))u=`<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->fields('${r}', 'numberOnly', '${r}', ${p}); ?>
  </div>
</div>`;else if(m.includes("yes")||m.includes("no")||m.includes("gender")||m.includes("marital")||m.includes("status")){let x=[];x=m.includes("yes")||m.includes("no")?["Yes","No"]:m.includes("gender")?["Male","Female"]:m.includes("marital")?["Single","Married","Widowed"]:["Option 1","Option 2","Option 3"],u=`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php
      $input->label('${l}', '');
      $input->radio('${r}', array('${x.join("', '")}'), '${r}', ${p}, '${x.length}');
    ?>
  </div>
</div>`}else u=m.includes("select")||m.includes("choose")||m.includes("category")||m.includes("type")?`<div class="row g-3 mb-3">
  <div class="col-md-4">
    <?php $input->select('${r}', array('Option 1', 'Option 2', 'Option 3'), '${r}', ${p}); ?>
  </div>
</div>`:m.includes("check")||m.includes("multiple")||m.includes("interests")||m.includes("hobbies")?`<div class="row g-3 mb-3">
  <div class="col-md-12 group" data-limit="7">
    <?php
      $input->label('${l}', '');
      $input->chkboxVal('${r}', array('Option 1', 'Option 2', 'Option 3'), '${r}', ${p}, '3');
    ?>
  </div>
</div>`:m.includes("comment")||m.includes("description")||m.includes("explanation")||m.includes("note")||m.includes("detail")?`<div class="row g-3 mb-3">
                <div class="col-md-12">
                    <?php
                    // @param field name, class, id and attribute
                    $input->textarea('${r}', 'form-control', '${r}', 'style="height: 100px;"${c?" required":""}', '', ' ', '${l}');
                    ?>
                </div>
            </div>`:m.includes("header")||m.includes("title")||m.includes("section")?`<p class="fieldheader text-center text-uppercase fw-bold py-2 mb-3">${l}</p>
<input type="hidden" name="${r}" value=":" />`:m.includes("name")||m.includes("first")||m.includes("last")||m.includes("full")?`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php $input->fields('${r}', 'letterOnly', '${r}', ${p}); ?>
  </div>
</div>`:m.includes("privacy policy")||m.includes("terms and conditions")||m.includes("data consent")||m.includes("personal information consent")?`<div class="disclaimer">
  <p><input type="checkbox" name="${r}" style="-webkit-appearance:checkbox" ${c?"required":""} /> &nbsp;<b>${l}</b> </p>
</div>`:`<div class="row g-3 mb-3">
  <div class="col-md-12">
    <?php $input->fields('${r}', 'form-control', '${r}', ${p}); ?>
  </div>
</div>`;a+=u+"\n\n"}),l.value=a.trim()}function copyGeneratedCode(){let e=document.getElementById("generatedCodeOutput");if(""===e.value.trim()){alert("No code to copy! Please enter some text first.");return}navigator.clipboard.writeText(e.value).then(()=>{let e=document.getElementById("copyGeneratedBtn");e.textContent="Copied!",e.style.backgroundColor="#d63384",setTimeout(()=>{e.textContent="Copy",e.style.backgroundColor="#f06292"},1500)}).catch(e=>{console.error("Failed to copy code: ",e),alert("Failed to copy code. Please try again.")})}function copyTransformedText(){syncRequiredStatusFromDOM();let e=document.querySelectorAll(".field-item");if(0===e.length){alert("No text to copy! Please enter some text first.");return}let t="";e.forEach((e,i)=>{let l=e.querySelector(".field-text").textContent,a=fieldRequiredStatus.get(i)||!1;t+=l+(a?" (Required)":"")+"\n"}),navigator.clipboard.writeText(t.trim()).then(()=>{let e=document.getElementById("copyTransformBtn");e.textContent="Copied!",e.style.backgroundColor="#d63384",setTimeout(()=>{e.textContent="Copy",e.style.backgroundColor="#f06292"},1500)}).catch(e=>{console.error("Failed to copy text: ",e),alert("Failed to copy text. Please try again.")})}function generateValidationCode(){let e=document.querySelectorAll(".field-item"),t=document.getElementById("validationCodeOutput");if(0===e.length){t.value="";return}let i=[],l=document.getElementById("transformInput").value.split("\n"),a=parseInt(document.getElementById("underscoreCount").value)||0;if(e.forEach((e,t)=>{let s=fieldRequiredStatus.get(t)||!1;if(s){let d=e.querySelector(".field-text"),n=d?d.textContent:"";if(!n){let o=l[t]?l[t].trim():"";n=o.replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),a>0&&(n="_".repeat(a)+n);let r=n,c=0,p=new Set;for(let u=0;u<t;u++){let m=l[u]?l[u].trim():"",v=m.replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");a>0&&(v="_".repeat(a)+v),p.add(v)}for(;p.has(r);)c++,r=n+"_".repeat(c);n=r}n.includes("'")&&(n=`"${n}"`),i.push(n)}}),0===i.length){t.value="";return}let s=i.map(e=>`								${e}: "required"`).join(",\n"),d=i.map(e=>`								${e}: ""`).join(",\n"),n=[];e.forEach((e,t)=>{let i=e.querySelector(".required-btn");if(i&&i.classList.contains("required")){let s=l[t]?l[t].trim():"",d=s.toLowerCase();if(d.includes("email")||d.includes("e-mail")){let o=e.querySelector(".field-text"),r=o?o.textContent:"";if(!r){r=s.replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),a>0&&(r="_".repeat(a)+r);let c=r,p=0,u=new Set;for(let m=0;m<t;m++){let v=l[m]?l[m].trim():"",f=v.replace(/\//g,"or").replace(/[^a-zA-Z0-9_?()]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");a>0&&(f="_".repeat(a)+f),u.add(f)}for(;u.has(c);)p++,c=r+"_".repeat(p);r=c}r.includes("'")&&(r=`"${r}"`),n.push(r)}}});let o=s;n.forEach(e=>{let t=`								${e}: { required: true, email: true }`;o=o.replace(`								${e}: "required"`,t)});let r=`			$("#submitform").validate({

							rules: {

								${o}

							},

							messages: {

								${d}

							}

						});`;t.value=r,setTimeout(function(){t&&(t.style.height="auto",t.style.height=t.scrollHeight+"px")},0)}function copyValidationCode(){let e=document.getElementById("validationCodeOutput");if(""===e.value.trim()){alert("No validation code to copy! Please set required fields first.");return}navigator.clipboard.writeText(e.value).then(()=>{let e=document.getElementById("copyValidationBtn");e.textContent="Copied!",e.style.backgroundColor="#d63384",setTimeout(()=>{e.textContent="Copy",e.style.backgroundColor="#f06292"},1500)}).catch(e=>{console.error("Failed to copy validation code: ",e),alert("Failed to copy validation code. Please try again.")})}document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".validation-section");e&&(e.style.display="none")}),window.addEventListener("beforeunload",function(e){e.preventDefault(),e.returnValue=""});let duplicateData={duplicates:{},originalCode:"",fixedCode:""};function detectDuplicateFieldNames(e){let t=[],i=/name\s*=\s*["']([^"']+)["']/gi,l;for(;null!==(l=i.exec(e));){let a=l[1].trim();a&&t.push(a)}let s=/\$input->\w+\(['"]([^'"]+)['"]/gi;for(;null!==(l=s.exec(e));){let d=l[1].trim();d&&t.push(d)}let n={};t.forEach(e=>{n[e]=(n[e]||0)+1});let o={};return Object.keys(n).forEach(e=>{n[e]>1&&(o[e]=n[e])}),o}function fixDuplicateFieldNames(e,t){let i=e,l=Object.keys(t).sort();return l.forEach(e=>{let t=0,l=RegExp(`name\\s*=\\s*["']${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}["']`,"gi");i=i.replace(l,i=>{if(1==++t)return i;{let l="_".repeat(t-1),a=`${e}${l}`;return i.replace(e,a)}}),t=0;let a=RegExp(`\\$input->(?!label\\b)\\w+\\s*\\(\\s*['"]${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}['"]`,"gi");i=i.replace(a,i=>{if(1==++t)return i;{let l="_".repeat(t-1),a=`${e}${l}`;return i.replace(e,a)}})}),i}function showDuplicateModal(e){let t=document.getElementById("duplicateModal"),i=document.getElementById("duplicateList");i.innerHTML="",Object.keys(e).forEach(t=>{let l=e[t],a=document.createElement("div");a.className="duplicate-item",a.innerHTML=`
            <span class="duplicate-name">${t}</span>
            <span class="duplicate-count">${l} occurrences</span>
        `,i.appendChild(a)}),t.style.display="block"}function closeDuplicateModal(){let e=document.getElementById("duplicateModal");e.style.display="none"}function showNoDuplicatesModal(){let e=document.getElementById("noDuplicatesModal");e.style.display="block"}function closeNoDuplicatesModal(){let e=document.getElementById("noDuplicatesModal");e.style.display="none"}function fixDuplicateNames(){if(duplicateData.duplicates&&Object.keys(duplicateData.duplicates).length>0){let e=document.getElementById("transformInput").value;if(""!==e.trim())updateGeneratedCode();else{let t=fixDuplicateFieldNames(duplicateData.originalCode,duplicateData.duplicates),i=document.getElementById("generatedCodeOutput");i.value=t}}closeDuplicateModal()}function checkDuplicates(){let e=document.getElementById("generatedCodeOutput"),t=e.value;if(!t.trim()){alert("Please paste or generate some form code first.");return}let i=detectDuplicateFieldNames(t);Object.keys(i).length>0?(duplicateData.duplicates=i,duplicateData.originalCode=t,showDuplicateModal(i)):showNoDuplicatesModal()}document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("generatedCodeOutput");e&&e.addEventListener("paste",function(e){setTimeout(()=>{let e=this.value,t=detectDuplicateFieldNames(e);Object.keys(t).length>0&&(duplicateData.duplicates=t,duplicateData.originalCode=e,showDuplicateModal(t))},100)}),window.addEventListener("click",function(e){let t=document.getElementById("duplicateModal"),i=document.getElementById("noDuplicatesModal");e.target===t&&closeDuplicateModal(),e.target===i&&closeNoDuplicatesModal()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(closeDuplicateModal(),closeNoDuplicatesModal())}),function(){let e=document.getElementById("generatedCodeOutput");if(!e)return;function t(){e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")}e.addEventListener("input",function(){setTimeout(t,0)});let i=e.value;setInterval(function l(){e&&e.value!==i&&(i=e.value,setTimeout(t,50))},300),setTimeout(t,500),window.addEventListener("resize",function(){setTimeout(t,0)})}(),function(){let e=document.getElementById("validationCodeOutput");if(!e)return;function t(){e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")}e.addEventListener("input",function(){setTimeout(t,0)});let i=e.value;setInterval(function l(){e&&e.value!==i&&(i=e.value,setTimeout(t,50))},300),setTimeout(t,500),window.addEventListener("resize",function(){setTimeout(t,0)})}()}),function(){let e=document.getElementById("scrollToTopBtn");function t(){window.pageYOffset>300?e.classList.add("show"):e.classList.remove("show")}e&&(window.addEventListener("scroll",t),e.addEventListener("click",function e(){window.scrollTo({top:0,behavior:"smooth"})}),t())}();